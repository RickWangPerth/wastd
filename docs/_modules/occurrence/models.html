

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>occurrence.models &mdash; WAStD 0.45.10 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> WAStD
          

          
          </a>

          
            
            
              <div class="version">
                0.45
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../data_collection/data_collection_overview.html">Data collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_collection/data_collection_admin.html">Data collection administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_collection/data_collection_training.html">Data collection training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_curators.html">Data curators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_curators.html#data-upload-from-odk">Data upload from ODK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_curators.html#data-qa">Data QA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_curators.html#data-release">Data release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_consumers.html">Data consumers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../business_analysts.html">Business Analysts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../business_analysts.html#how-it-s-made-the-process">How itâ€™s made - the process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../business_analysts.html#reproducible-research">Reproducible Research</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainers.html">Application maintainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers.html">Developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers.html#project-delivery-ticking-the-boxes">Project delivery: ticking the boxes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">WAStD</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>occurrence.models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for occurrence.models</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Occurrence models.</span>

<span class="sd">These models support opportunistic encounters with threatened and priority</span>
<span class="sd">Fauna, Flora and Comunities (defined in taxonomy).</span>

<span class="sd">Observer name / address / phone / email is captured through the observer being</span>
<span class="sd">a system user.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">get_user_model</span>
<span class="kn">from</span> <span class="nn">django.contrib.gis.db</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">geo_models</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.db.models.signals</span> <span class="kn">import</span> <span class="n">post_save</span><span class="p">,</span> <span class="n">pre_delete</span><span class="p">,</span> <span class="n">pre_save</span>  <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">django.dispatch</span> <span class="kn">import</span> <span class="n">receiver</span>

<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="kn">from</span> <span class="nn">django.core.validators</span> <span class="kn">import</span> <span class="n">MaxValueValidator</span><span class="p">,</span> <span class="n">MinValueValidator</span>
<span class="kn">from</span> <span class="nn">django.utils.safestring</span> <span class="kn">import</span> <span class="n">mark_safe</span>
<span class="kn">from</span> <span class="nn">django.utils.text</span> <span class="kn">import</span> <span class="n">slugify</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="kn">from</span> <span class="nn">polymorphic.models</span> <span class="kn">import</span> <span class="n">PolymorphicModel</span>

<span class="kn">from</span> <span class="nn">shared.models</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span>
    <span class="n">RenderMixin</span><span class="p">,</span>
    <span class="n">LegacySourceMixin</span><span class="p">,</span>
    <span class="n">ObservationAuditMixin</span><span class="p">,</span>
    <span class="n">QualityControlMixin</span><span class="p">,</span>
    <span class="n">UrlsMixin</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">taxonomy.models</span> <span class="kn">import</span> <span class="n">Community</span><span class="p">,</span> <span class="n">Taxon</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>


<div class="viewcode-block" id="EncounterType"><a class="viewcode-back" href="../../developers.html#occurrence.models.EncounterType">[docs]</a><span class="k">class</span> <span class="nc">EncounterType</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The encounter type.&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="AreaEncounter"><a class="viewcode-back" href="../../developers.html#occurrence.models.AreaEncounter">[docs]</a><span class="k">class</span> <span class="nc">AreaEncounter</span><span class="p">(</span><span class="n">PolymorphicModel</span><span class="p">,</span>
                    <span class="n">RenderMixin</span><span class="p">,</span>
                    <span class="n">UrlsMixin</span><span class="p">,</span>
                    <span class="n">LegacySourceMixin</span><span class="p">,</span>
                    <span class="n">ObservationAuditMixin</span><span class="p">,</span>
                    <span class="n">QualityControlMixin</span><span class="p">,</span>
                    <span class="n">geo_models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Encounter with an Area.</span>

<span class="sd">    The Area is represented spatially throuh a polygonal extent</span>
<span class="sd">    and an additional point.</span>

<span class="sd">    This model accommodates anything with a spatial extent, providing:</span>

<span class="sd">    * Area type (to classify different kinds of areas)</span>
<span class="sd">    * Area code to identify multiple measurements of the same Area</span>
<span class="sd">    * Polygonal or Point representation of the area</span>
<span class="sd">    * Mixins: data QA levels, legacy source tracking</span>

<span class="sd">    Some additional fields are populated behind the scenes at each save and</span>
<span class="sd">    serve to cache low churn, high use content:</span>

<span class="sd">    * label: the cached __str__ representation</span>
<span class="sd">    * point: set from geom centroid id empty</span>
<span class="sd">    * northern extent: useful to sort Areas by latitude</span>
<span class="sd">    * as html: a pre-compiled HTML map popup</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">AREA_TYPE_EPHEMERAL_SITE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">AREA_TYPE_PERMANENT_SITE</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">AREA_TYPE_CRITICAL_HABITAT</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">AREA_TYPE_PARTIAL_SURVEY</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">AREA_TYPE_TEC_BOUNDARY</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">AREA_TYPE_TEC_BUFFER</span> <span class="o">=</span> <span class="mi">11</span>
    <span class="n">AREA_TYPE_TEC_SITE</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">AREA_TYPE_FLORA_POPULATION</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">AREA_TYPE_FLORA_SUBPOPULATION</span> <span class="o">=</span> <span class="mi">21</span>
    <span class="n">AREA_TYPE_FAUNA_SITE</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">AREA_TYPE_MPA</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">AREA_TYPE_LOCALITY</span> <span class="o">=</span> <span class="mi">41</span>

    <span class="n">AREA_TYPES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">AREA_TYPE_EPHEMERAL_SITE</span><span class="p">,</span> <span class="s2">&quot;Fauna Ephemeral Site&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_PERMANENT_SITE</span><span class="p">,</span> <span class="s2">&quot;Fauna Permanent Site&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_PARTIAL_SURVEY</span><span class="p">,</span> <span class="s2">&quot;Generic Partial survey&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_CRITICAL_HABITAT</span><span class="p">,</span> <span class="s2">&quot;Critical Habitat&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_TEC_BOUNDARY</span><span class="p">,</span> <span class="s2">&quot;TEC Boundary&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_TEC_BUFFER</span><span class="p">,</span> <span class="s2">&quot;TEC Buffer&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_TEC_SITE</span><span class="p">,</span> <span class="s2">&quot;TEC Site&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_FLORA_POPULATION</span><span class="p">,</span> <span class="s2">&quot;Flora Population&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_FLORA_SUBPOPULATION</span><span class="p">,</span> <span class="s2">&quot;Flora Subpopulation&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_FAUNA_SITE</span><span class="p">,</span> <span class="s2">&quot;Fauna Site&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_MPA</span><span class="p">,</span> <span class="s2">&quot;Marine Protected Area&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_LOCALITY</span><span class="p">,</span> <span class="s2">&quot;Locality&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">COMMUNITY_AREA_TYPES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">AREA_TYPE_PARTIAL_SURVEY</span><span class="p">,</span> <span class="s2">&quot;Generic Partial Survey&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_TEC_BOUNDARY</span><span class="p">,</span> <span class="s2">&quot;TEC Boundary&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_TEC_BUFFER</span><span class="p">,</span> <span class="s2">&quot;TEC Buffer&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_TEC_SITE</span><span class="p">,</span> <span class="s2">&quot;TEC Site&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">TAXON_AREA_TYPES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">AREA_TYPE_EPHEMERAL_SITE</span><span class="p">,</span> <span class="s2">&quot;Fauna Ephemeral Site&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_PERMANENT_SITE</span><span class="p">,</span> <span class="s2">&quot;Fauna Permanent Site&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_PARTIAL_SURVEY</span><span class="p">,</span> <span class="s2">&quot;Generic Partial Survey&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_FLORA_POPULATION</span><span class="p">,</span> <span class="s2">&quot;Flora Population&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">AREA_TYPE_FLORA_SUBPOPULATION</span><span class="p">,</span> <span class="s2">&quot;Flora Subpopulation&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">GEOLOCATION_CAPTURE_METHOD_DEFAULT</span> <span class="o">=</span> <span class="s1">&#39;drawn-online-map-widget&#39;</span>
    <span class="n">GEOLOCATION_CAPTURE_METHOD_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">GEOLOCATION_CAPTURE_METHOD_DEFAULT</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Hand-drawn on online map widget&quot;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s2">&quot;gps-point&quot;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;GPS point with text description of location extent&quot;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s2">&quot;gps-perimeter-walk&quot;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;GPS perimeter walk&quot;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s2">&quot;dgps&quot;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Differential GPS capture of entire location extent&quot;</span><span class="p">)),</span>
    <span class="p">)</span>

    <span class="c1"># Naming -----------------------------------------------------------------#</span>
    <span class="n">code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Area code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;A URL-safe, short code for the area. &quot;</span>
                    <span class="s2">&quot;Multiple records of the same Area &quot;</span>
                    <span class="s2">&quot;will be recognised by the same area type and code.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">label</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Label&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;A short but comprehensive label for the encounter, &quot;</span>
                    <span class="s2">&quot;populated from the model&#39;s string representation.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Area name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;A human-readable name for the observed area.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;A comprehensive description of the location &quot;</span>
            <span class="s2">&quot;(nearby features and places, identifiable boundaries, extent) &quot;</span>
            <span class="s2">&quot;and the encounter where forms and attached photos lack detail.&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Time: ObservationAuditMixin provides date and observer -----------------#</span>
    <span class="c1">#</span>
    <span class="c1"># Encounter type: what brought the observer to the encounter? opportunistic, research, monitoring</span>
    <span class="n">encounter_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">EncounterType</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Encounter Type&quot;</span><span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing encounter types via the data curation portal.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Geolocation ------------------------------------------------------------#</span>
    <span class="n">area_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Area type&quot;</span><span class="p">),</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">AREA_TYPE_EPHEMERAL_SITE</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">AREA_TYPES</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;What type describes the area occupied by the encounter &quot;</span>
            <span class="s2">&quot;most accurately? The area can be an opportunistic, once-off &quot;</span>
            <span class="s2">&quot;chance encounter (point), a fixed survey site (polygon), a &quot;</span>
            <span class="s2">&quot;partial or a complete survey of an area occupied by the &quot;</span>
            <span class="s2">&quot;encountered subject (polygon).&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">accuracy</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FloatField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Accuracy [m]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The measured or estimated accuracy &quot;</span>
                    <span class="s2">&quot;of the location in meters.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">geolocation_capture_method</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Geolocation capture method&quot;</span><span class="p">),</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">GEOLOCATION_CAPTURE_METHOD_DEFAULT</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">GEOLOCATION_CAPTURE_METHOD_CHOICES</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;How were the coordinates of the geolocation captured? &quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">point</span> <span class="o">=</span> <span class="n">geo_models</span><span class="o">.</span><span class="n">PointField</span><span class="p">(</span>
        <span class="n">srid</span><span class="o">=</span><span class="mi">4326</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Representative Point&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;A point representing the area occupied by the encountered &quot;</span>
            <span class="s2">&quot;subject. If empty, the point will be calculated as the centroid &quot;</span>
            <span class="s2">&quot;of the polygon extent.&quot;</span><span class="p">))</span>

    <span class="n">northern_extent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FloatField</span><span class="p">(</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Northernmost latitude&quot;</span><span class="p">),</span>
        <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The northernmost latitude is derived from location &quot;</span>
                    <span class="s2">&quot;polygon or point and serves to sort areas.&quot;</span><span class="p">),)</span>

    <span class="n">geom</span> <span class="o">=</span> <span class="n">geo_models</span><span class="o">.</span><span class="n">PolygonField</span><span class="p">(</span>
        <span class="n">srid</span><span class="o">=</span><span class="mi">4326</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Location&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The exact extent of the area occupied by the encountered &quot;</span>
                    <span class="s2">&quot;subject as polygon in WGS84, if available.&quot;</span><span class="p">))</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Cached fields</span>
    <span class="n">as_html</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;HTML representation&quot;</span><span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The cached HTML representation for display purposes.&quot;</span><span class="p">),)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="c1"># ordering = [&quot;-northern_extent&quot;, &quot;name&quot;]</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Area Encounter&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Area Encounters&quot;</span>
        <span class="n">index_together</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;northern_extent&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="p">]</span>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="s2">&quot;source_id&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The unicode representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;Encounter at [</span><span class="si">{0}</span><span class="s2">] (</span><span class="si">{1}</span><span class="s2">) </span><span class="si">{2}</span><span class="s2"> on </span><span class="si">{3}</span><span class="s2"> by </span><span class="si">{4}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_area_type_display</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encountered_on</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encountered_by</span><span class="p">)</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># URLs</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Derived properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">latitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The latitude of the point.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">y</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">longitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The longitude of the point.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">x</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">derived_point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The point, derived from the polygon.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">geom</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">centroid</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">derived_northern_extent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The northernmost extent of the polygon, or the latitude of the point.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">geom</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">extent</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">y</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">card_template</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;One shared template works for both TAE and CAE.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;occurrence/cards/areaencounter.html&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">html_template</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;One shared template works for both TAE and CAE.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;occurrence/popup/areaencounter.html&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">derived_html</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generate HTML popup content.&quot;&quot;&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">html_template</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mark_safe</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">({</span><span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="p">}))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">subject</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the subject of the encounter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Functions</span>
<div class="viewcode-block" id="AreaEncounter.get_nearby_encounters"><a class="viewcode-back" href="../../developers.html#occurrence.models.AreaEncounter.get_nearby_encounters">[docs]</a>    <span class="k">def</span> <span class="nf">get_nearby_encounters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dist_dd</span><span class="o">=</span><span class="mf">0.005</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get encounters within dist_dd (default 0.005 degrees, ca 500m).</span>

<span class="sd">        Arguments:</span>

<span class="sd">        dist_dd &lt;float&gt; The search radius in decimal degrees. Default: 0.005 (ca 500 m).</span>

<span class="sd">        Returns:</span>
<span class="sd">        A queryset of nearby AreaEncounters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">AreaEncounter</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">point__distance_lte</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">dist_dd</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="TaxonAreaEncounter"><a class="viewcode-back" href="../../developers.html#occurrence.models.TaxonAreaEncounter">[docs]</a><span class="k">class</span> <span class="nc">TaxonAreaEncounter</span><span class="p">(</span><span class="n">AreaEncounter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Encounter in time and space with a Taxon.&quot;&quot;&quot;</span>

    <span class="n">taxon</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Taxon</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">PROTECT</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;taxon_occurrences&quot;</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The taxonomic name of the encountered subject.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Taxon Encounter&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Taxon Encounters&quot;</span>
        <span class="n">card_template</span> <span class="o">=</span> <span class="s2">&quot;occurrence/cards/areaencounter.html&quot;</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">]</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The unicode representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;Encounter of </span><span class="si">{5}</span><span class="s2"> at [</span><span class="si">{0}</span><span class="s2">] (</span><span class="si">{1}</span><span class="s2">) </span><span class="si">{2}</span><span class="s2"> on </span><span class="si">{3}</span><span class="s2"> by </span><span class="si">{4}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_area_type_display</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encountered_on</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encountered_by</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">taxon</span><span class="p">)</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Derived properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">subject</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the subject of the encounter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxon</span>

<div class="viewcode-block" id="TaxonAreaEncounter.get_subject"><a class="viewcode-back" href="../../developers.html#occurrence.models.TaxonAreaEncounter.get_subject">[docs]</a>    <span class="k">def</span> <span class="nf">get_subject</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the subject of the encounter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxon</span></div>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Functions</span>
<div class="viewcode-block" id="TaxonAreaEncounter.nearby_same"><a class="viewcode-back" href="../../developers.html#occurrence.models.TaxonAreaEncounter.nearby_same">[docs]</a>    <span class="k">def</span> <span class="nf">nearby_same</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dist_dd</span><span class="o">=</span><span class="mf">0.005</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return encounters with same taxon within search radius (dist_dd).</span>

<span class="sd">        Arguments:</span>

<span class="sd">        dist_dd &lt;float&gt; The search radius in decimal degrees. Default: 0.005 (ca 500 m).</span>

<span class="sd">        Returns:</span>
<span class="sd">        A queryset of nearby TaxonAreaEncounters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">TaxonAreaEncounter</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">taxon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">taxon</span><span class="p">,</span>
            <span class="n">point__distance_lte</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">dist_dd</span><span class="p">)</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="CommunityAreaEncounter"><a class="viewcode-back" href="../../developers.html#occurrence.models.CommunityAreaEncounter">[docs]</a><span class="k">class</span> <span class="nc">CommunityAreaEncounter</span><span class="p">(</span><span class="n">AreaEncounter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Encounter in time and space with a community.&quot;&quot;&quot;</span>

    <span class="n">community</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Community</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">PROTECT</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;community_occurrences&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Community Encounter&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Community Encounters&quot;</span>
        <span class="n">card_template</span> <span class="o">=</span> <span class="s2">&quot;occurrence/cards/areaencounter.html&quot;</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="p">]</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The unicode representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;Encounter of </span><span class="si">{5}</span><span class="s2"> at [</span><span class="si">{0}</span><span class="s2">] (</span><span class="si">{1}</span><span class="s2">) </span><span class="si">{2}</span><span class="s2"> on </span><span class="si">{3}</span><span class="s2"> by </span><span class="si">{4}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_area_type_display</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encountered_on</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encountered_by</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">community</span><span class="p">)</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Derived properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">subject</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the subject of the encounter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">community</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Functions</span>
<div class="viewcode-block" id="CommunityAreaEncounter.nearby_same"><a class="viewcode-back" href="../../developers.html#occurrence.models.CommunityAreaEncounter.nearby_same">[docs]</a>    <span class="k">def</span> <span class="nf">nearby_same</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dist_dd</span><span class="o">=</span><span class="mf">0.005</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return encounters with same community within search radius (dist_dd).</span>

<span class="sd">        Arguments:</span>

<span class="sd">        dist_dd &lt;float&gt; The search radius in decimal degrees. Default: 0.005 (ca 500 m).</span>

<span class="sd">        Returns:</span>
<span class="sd">        A queryset of nearby CommunityAreaEncounters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">CommunityAreaEncounter</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">community</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">community</span><span class="p">,</span>
            <span class="n">point__distance_lte</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">dist_dd</span><span class="p">)</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="area_caches"><a class="viewcode-back" href="../../developers.html#occurrence.models.area_caches">[docs]</a><span class="nd">@receiver</span><span class="p">(</span><span class="n">pre_save</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">TaxonAreaEncounter</span><span class="p">)</span>
<span class="nd">@receiver</span><span class="p">(</span><span class="n">pre_save</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">CommunityAreaEncounter</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">area_caches</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;AreaEncounter: Cache expensive lookups.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">code</span><span class="p">:</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">code</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">instance</span><span class="o">.</span><span class="n">code</span> <span class="ow">and</span> <span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">code</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">geom</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">instance</span><span class="o">.</span><span class="n">point</span><span class="p">:</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">derived_point</span>

    <span class="n">instance</span><span class="o">.</span><span class="n">northern_extent</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">derived_northern_extent</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1000</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[areaencounter_caches] Updating cache fields.&quot;</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">as_html</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">derived_html</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[area_caches] New Area, re-save to populate caches.&quot;</span><span class="p">)</span></div>


<span class="c1"># Observation models ---------------------------------------------------------#</span>
<div class="viewcode-block" id="ObservationGroup"><a class="viewcode-back" href="../../developers.html#occurrence.models.ObservationGroup">[docs]</a><span class="k">class</span> <span class="nc">ObservationGroup</span><span class="p">(</span>
        <span class="n">QualityControlMixin</span><span class="p">,</span>
        <span class="n">RenderMixin</span><span class="p">,</span>
        <span class="n">UrlsMixin</span><span class="p">,</span>
        <span class="n">PolymorphicModel</span><span class="p">,</span>
        <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The Observation base class for area encounter observations.</span>

<span class="sd">    Everything happens somewhere, at a time, to someone, and someone records it.</span>
<span class="sd">    Therefore, an ObservationGroup must happen during an Encounter.</span>

<span class="sd">    The ObservationGroup shares with Encounter:</span>

<span class="sd">    * location,</span>
<span class="sd">    * datetime,</span>
<span class="sd">    * reporter,</span>
<span class="sd">    * subject (species or community).</span>

<span class="sd">    The ObservationGroup has its own:</span>

<span class="sd">    * QA trust levels.</span>

<span class="sd">    Having separate QA trust levels allows to synthesize the &quot;best available information&quot;</span>
<span class="sd">    about a Species / Community occurrence, hand-selected by custodians from different</span>
<span class="sd">    TAE/CAE.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">encounter</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">AreaEncounter</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Occurrence&quot;</span><span class="p">),</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;observations&quot;</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;The Occurrence report containing the observation group.&quot;</span><span class="p">),)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Observation Group&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The unicode representation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">] </span><span class="si">{2}</span><span class="s2"> </span><span class="si">{3}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encounter</span><span class="o">.</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encounter</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pk</span>
        <span class="p">)</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># URLs</span>
<div class="viewcode-block" id="ObservationGroup.get_absolute_url"><a class="viewcode-back" href="../../developers.html#occurrence.models.ObservationGroup.get_absolute_url">[docs]</a>    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Detail url.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">encounter</span><span class="o">.</span><span class="n">get_absolute_url</span><span class="p">()</span></div>

<div class="viewcode-block" id="ObservationGroup.list_url"><a class="viewcode-back" href="../../developers.html#occurrence.models.ObservationGroup.list_url">[docs]</a>    <span class="k">def</span> <span class="nf">list_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;ObsGroup list is not defined.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;TODO: implement ObservationGroup list view.&quot;</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">update_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Custom update url contains occ pk and obsgroup pk.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">:</span><span class="si">{1}</span><span class="s1">-update&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model_name</span><span class="p">),</span>
            <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;occ_pk&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">encounter</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span> <span class="s1">&#39;obs_pk&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Derived properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">opts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Model opts.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>

    <span class="c1"># Text representation</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="c1"># Location and date</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">point</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the encounter point location.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">encounter</span><span class="o">.</span><span class="n">point</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">latitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The encounter&#39;s latitude.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">encounter</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">y</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">longitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The encounter&#39;s longitude.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">encounter</span><span class="o">.</span><span class="n">point</span><span class="o">.</span><span class="n">x</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The encounter&#39;s timestamp.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">encounter</span><span class="o">.</span><span class="n">encountered_on</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>

    <span class="c1"># Display and cached properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">observation_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The concrete model name.</span>

<span class="sd">        This method will inherit down the polymorphic chain, and always return</span>
<span class="sd">        the actual child model&#39;s name.</span>

<span class="sd">        `observation_name` can be included as field e.g. in API serializers,</span>
<span class="sd">        so e.g. a writeable serializer would know which child model to `create`</span>
<span class="sd">        or `update`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">polymorphic_ctype</span><span class="o">.</span><span class="n">model</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">model_name_verbose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the model&#39;s verbose name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span></div>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Functions</span>
    <span class="c1"># none yet</span>


<div class="viewcode-block" id="fileattachmentobservation_media"><a class="viewcode-back" href="../../developers.html#occurrence.models.fileattachmentobservation_media">[docs]</a><span class="k">def</span> <span class="nf">fileattachmentobservation_media</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return an upload path for FileAttachment media.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;files/</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">/</span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">encounter</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
        <span class="n">filename</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="FileAttachment"><a class="viewcode-back" href="../../developers.html#occurrence.models.FileAttachment">[docs]</a><span class="k">class</span> <span class="nc">FileAttachment</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A file attachment to an ObservationGroup.</span>

<span class="sd">    The file attachment can be a photo, a paper datasheet scanned to PDF,</span>
<span class="sd">    a video or audio clip, a communication record or any other digital resource</span>
<span class="sd">    up to the maximum upload size.</span>

<span class="sd">    Copyright is handled at application level, i.e. by submitting a file</span>
<span class="sd">    as attachment, the author permits use by the application and downstream</span>
<span class="sd">    systems under the application&#39;s agreed license, e.g. cc-by-sa.</span>

<span class="sd">    Each attachment can be marked as confidential to be excluded from publication.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">attachment</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="n">fileattachmentobservation_media</span><span class="p">)</span>

    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Title&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;A self-explanatory title for the file attachment.&quot;</span><span class="p">))</span>

    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">User</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Author&quot;</span><span class="p">),</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;occurrence_fileattachments&quot;</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The person who authored and endorsed this file.&quot;</span><span class="p">))</span>

    <span class="n">confidential</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is confidential&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whether this file is confidential or &quot;</span>
                    <span class="s2">&quot;can be released to the public.&quot;</span><span class="p">),)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;File Attachment&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;File Attachments&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> (</span><span class="si">{1}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="o">.</span><span class="n">fullname</span><span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="c1"># Site level observations</span>
<span class="c1">#</span>
<div class="viewcode-block" id="Landform"><a class="viewcode-back" href="../../developers.html#occurrence.models.Landform">[docs]</a><span class="k">class</span> <span class="nc">Landform</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The landform.</span>

<span class="sd">    Sources:</span>

<span class="sd">    Gillian Stack 2017: TPFR Field Manual, Appendix 5, Landform.</span>
<span class="sd">    McDonald et al 1998: The Australian Soil and Land Survey Field Handbook.</span>
<span class="sd">    Hill et al 1996: Wetland of the Swan Coastal Plain - Wetland Mapping,</span>
<span class="sd">    Clasification and Evaluation Vol 2a.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="RockType"><a class="viewcode-back" href="../../developers.html#occurrence.models.RockType">[docs]</a><span class="k">class</span> <span class="nc">RockType</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The rock type.</span>

<span class="sd">    Sources:</span>

<span class="sd">    Gillian Stack 2017: TPFR Field Manual, Appendix 6, Rock type. p31.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="SoilType"><a class="viewcode-back" href="../../developers.html#occurrence.models.SoilType">[docs]</a><span class="k">class</span> <span class="nc">SoilType</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The soil type.</span>

<span class="sd">    Sources:</span>

<span class="sd">    Gillian Stack 2017: TPFR Field Manual, Appendix 7, Soil type. p32.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="SoilColour"><a class="viewcode-back" href="../../developers.html#occurrence.models.SoilColour">[docs]</a><span class="k">class</span> <span class="nc">SoilColour</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The soil colour.</span>

<span class="sd">    Sources:</span>

<span class="sd">    Gillian Stack 2017: TPFR Field Manual, Appendix 8, Soil colour. p33.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="Drainage"><a class="viewcode-back" href="../../developers.html#occurrence.models.Drainage">[docs]</a><span class="k">class</span> <span class="nc">Drainage</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The water drainage.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="HabitatComposition"><a class="viewcode-back" href="../../developers.html#occurrence.models.HabitatComposition">[docs]</a><span class="k">class</span> <span class="nc">HabitatComposition</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Habitat composition.&quot;&quot;&quot;</span>

    <span class="n">landform</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Landform</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Landform&quot;</span><span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The landform.&quot;</span><span class="p">))</span>

    <span class="n">rock_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">RockType</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rock type&quot;</span><span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing rock types via the data curation portal.&quot;</span><span class="p">))</span>

    <span class="n">loose_rock_percent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">MinValueValidator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">MaxValueValidator</span><span class="p">(</span><span class="mi">100</span><span class="p">)],</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Loose rock [%]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The proportion of habitat covered by loose rock &quot;</span>
                    <span class="s2">&quot;in percent from none (0) to all (100).&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">soil_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">SoilType</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Soil type&quot;</span><span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing soil types via the data curation portal.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">soil_colour</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">SoilColour</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Soil colour&quot;</span><span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing soil colours via the data curation portal.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">drainage</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Drainage</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Drainage&quot;</span><span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing drainage types via the data curation portal.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Habitat Composition&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Habitat Compositions&quot;</span>

<div class="viewcode-block" id="HabitatComposition.tldr"><a class="viewcode-back" href="../../developers.html#occurrence.models.HabitatComposition.tldr">[docs]</a>    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;Lf </span><span class="si">{0}</span><span class="s2">, RT </span><span class="si">{1}</span><span class="s2">, LR </span><span class="si">{2}</span><span class="s2">%, ST </span><span class="si">{3}</span><span class="s2">, SC </span><span class="si">{4}</span><span class="s2">, Dr </span><span class="si">{5}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">landform</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rocktype</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loose_rock_percent</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">soiltype</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">soilcolour</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drainage</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>

        <span class="p">)</span></div></div>


<span class="c1"># Fire response is OOS</span>

<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="c1"># Survey level observations</span>
<span class="c1">#</span>
<div class="viewcode-block" id="SurveyMethod"><a class="viewcode-back" href="../../developers.html#occurrence.models.SurveyMethod">[docs]</a><span class="k">class</span> <span class="nc">SurveyMethod</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The survey method.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="AreaAssessment"><a class="viewcode-back" href="../../developers.html#occurrence.models.AreaAssessment">[docs]</a><span class="k">class</span> <span class="nc">AreaAssessment</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A description of survey effort at a flora or TEC site.&quot;&quot;&quot;</span>

    <span class="n">survey_method</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">SurveyMethod</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Survey Method&quot;</span><span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing survey methods via the data curation portal.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">area_surveyed_m2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Surveyed Area [m2]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An estimate of surveyed area in square meters.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">survey_duration_min</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Survey Duration [min]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An estimate of survey duration minutes.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Area Assessment&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Area Assessments&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> of </span><span class="si">{1}</span><span class="s2"> m2 in </span><span class="si">{2}</span><span class="s2"> mins&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">survey_method</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">area_surveyed_m2</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">survey_duration_min</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">survey_effort_minutes_per_100sqm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Give an estimate of survey intensity as time spent per area.</span>

<span class="sd">        Calculated from area surveyed and survey duration, or None.</span>
<span class="sd">        Unit is minutes / 100 m2.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_surveyed_m2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">survey_duration_min</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">survey_duration_min</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">area_surveyed_m2</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="SoilCondition"><a class="viewcode-back" href="../../developers.html#occurrence.models.SoilCondition">[docs]</a><span class="k">class</span> <span class="nc">SoilCondition</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The soil condition.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="HabitatCondition"><a class="viewcode-back" href="../../developers.html#occurrence.models.HabitatCondition">[docs]</a><span class="k">class</span> <span class="nc">HabitatCondition</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Community occurrence or habitat condition on date of encounter.</span>

<span class="sd">    Estimated percentages of observed area at each bush forever scale.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">pristine_percent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">MinValueValidator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">MaxValueValidator</span><span class="p">(</span><span class="mi">100</span><span class="p">)],</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Pristine [%]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The proportion of habitat in percent [0..100] in pristine condition.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">excellent_percent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">MinValueValidator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">MaxValueValidator</span><span class="p">(</span><span class="mi">100</span><span class="p">)],</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Excellent [%]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The proportion of habitat in percent [0..100] in excellent condition.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">very_good_percent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">MinValueValidator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">MaxValueValidator</span><span class="p">(</span><span class="mi">100</span><span class="p">)],</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Very good [%]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The proportion of habitat in percent [0..100] in very good condition.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">good_percent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">MinValueValidator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">MaxValueValidator</span><span class="p">(</span><span class="mi">100</span><span class="p">)],</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Good [%]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The proportion of habitat in percent [0..100] in good condition.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">degraded_percent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">MinValueValidator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">MaxValueValidator</span><span class="p">(</span><span class="mi">100</span><span class="p">)],</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Degraded [%]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The proportion of habitat in percent [0..100] in degraded condition.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">completely_degraded_percent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">MinValueValidator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">MaxValueValidator</span><span class="p">(</span><span class="mi">100</span><span class="p">)],</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Completely_degraded [%]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The proportion of habitat in percent [0..100] in completely degraded condition.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">soil_condition</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">SoilCondition</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Soil condition&quot;</span><span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing soil conditions via the data curation portal.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Habitat Condition&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Habitat Conditions&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;PRS </span><span class="si">{0}</span><span class="s2">, EXC </span><span class="si">{1}</span><span class="s2">, VGD </span><span class="si">{2}</span><span class="s2">, GOO </span><span class="si">{3}</span><span class="s2">, DGR </span><span class="si">{4}</span><span class="s2">, CDG </span><span class="si">{5}</span><span class="s2">, SC </span><span class="si">{6}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pristine_percent</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">excellent_percent</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">very_good_percent</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">good_percent</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">degraded_percent</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">completely_degraded_percent</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">soil_condition</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="FireHistory"><a class="viewcode-back" href="../../developers.html#occurrence.models.FireHistory">[docs]</a><span class="k">class</span> <span class="nc">FireHistory</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Evidence of past fire date and intensity.&quot;&quot;&quot;</span>

    <span class="n">HMLN_DEFAULT</span> <span class="o">=</span> <span class="s2">&quot;NA&quot;</span>
    <span class="n">HMLN_NONE</span> <span class="o">=</span> <span class="s2">&quot;no&quot;</span>
    <span class="n">HMLN_LOW</span> <span class="o">=</span> <span class="s2">&quot;low&quot;</span>
    <span class="n">HMLN_MEDIUM</span> <span class="o">=</span> <span class="s2">&quot;medium&quot;</span>
    <span class="n">HMLN_HIGH</span> <span class="o">=</span> <span class="s2">&quot;high&quot;</span>
    <span class="n">HMLN_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">HMLN_DEFAULT</span><span class="p">,</span> <span class="s2">&quot;NA&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">HMLN_NONE</span><span class="p">,</span> <span class="s2">&quot;No evidence of fire&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">HMLN_LOW</span><span class="p">,</span> <span class="s2">&quot;Low&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">HMLN_MEDIUM</span><span class="p">,</span> <span class="s2">&quot;Medium&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">HMLN_HIGH</span><span class="p">,</span> <span class="s2">&quot;High&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">last_fire_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date of last fire&quot;</span><span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The estimated date of the last fire, if evident.&quot;</span><span class="p">))</span>

    <span class="n">fire_intensity</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Fire intensity&quot;</span><span class="p">),</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">HMLN_DEFAULT</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">HMLN_CHOICES</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;Estimated intensity of last fire on a scale from High to Low, &quot;</span>
            <span class="s2">&quot;or NA if no evidence of past fires.&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Fire History&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Fire Histories&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> intensity fire on </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_fire_intensity_display</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_fire_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span><span class="p">),</span>
        <span class="p">)</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="c1"># Population level observations</span>
<span class="c1">#</span>
<div class="viewcode-block" id="VegetationClassification"><a class="viewcode-back" href="../../developers.html#occurrence.models.VegetationClassification">[docs]</a><span class="k">class</span> <span class="nc">VegetationClassification</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Veg Classification should follow NVIS classification categories.</span>

<span class="sd">    This is a free text version for legacy data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">level1</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Level 1&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The first classification level.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">level2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Level 2&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The first classification level.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">level3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Level 3&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The first classification level.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">level4</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Level 4&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The first classification level.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Vegetation Classification&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Vegetation Classifications&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">level1</span></div>


<div class="viewcode-block" id="CountAccuracy"><a class="viewcode-back" href="../../developers.html#occurrence.models.CountAccuracy">[docs]</a><span class="k">class</span> <span class="nc">CountAccuracy</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Accuracy levels.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="CountMethod"><a class="viewcode-back" href="../../developers.html#occurrence.models.CountMethod">[docs]</a><span class="k">class</span> <span class="nc">CountMethod</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The count method.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="CountSubject"><a class="viewcode-back" href="../../developers.html#occurrence.models.CountSubject">[docs]</a><span class="k">class</span> <span class="nc">CountSubject</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The count subject.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="PlantCondition"><a class="viewcode-back" href="../../developers.html#occurrence.models.PlantCondition">[docs]</a><span class="k">class</span> <span class="nc">PlantCondition</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The plant condition.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="PlantCount"><a class="viewcode-back" href="../../developers.html#occurrence.models.PlantCount">[docs]</a><span class="k">class</span> <span class="nc">PlantCount</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Population plant count.&quot;&quot;&quot;</span>

    <span class="c1"># Survey level</span>
    <span class="n">land_manager_present</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Land Manager Present&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Especially on private property, was the land manager or owner present?&quot;</span><span class="p">),)</span>

    <span class="n">count_method</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">CountMethod</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Plant Count Method&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing lookup values via the data curation portal.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">count_accuracy</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">CountAccuracy</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Plant Count Accuracy&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing lookup values via the data curation portal.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">count_subject</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">CountSubject</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Counted Subject&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;What was counted?&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Plant Count (Detailed)</span>
    <span class="n">no_alive_mature</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number Alive Mature&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of alive, mature individuals counted.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">no_alive_juvenile</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number Alive Juvenile&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of alive, juvenile individuals counted.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">no_alive_seedlings</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number Alive Seedlings&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of alive seedlings counted.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">no_dead_mature</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number Dead Mature&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of dead, mature individuals counted.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">no_dead_juvenile</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number Dead Juvenile&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of dead, juvenile individuals counted.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">no_dead_seedlings</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number Dead Seedlings&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of dead seedlings counted.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Plant Count (Simple)</span>
    <span class="n">no_alive_simple</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number Alive (Simple)&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of alive individuals counted in a simple count.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">no_dead_simple</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number Dead (Simple)&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of dead individuals counted in a simple count.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Quadrats</span>
    <span class="n">population_area_estimated_m2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Estimated population area [m2]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The estimated area of the encountered plant&quot;</span>
                    <span class="s2">&quot; population in square meters.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">quadrats_present</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Quadrats Present&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Were survey quadrats present?&quot;</span><span class="p">),)</span>

    <span class="n">quadrats_details_attached</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Quadrat Details Attached&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Are details of quadrat surveys uploaded as File Attachment?&quot;</span><span class="p">),)</span>

    <span class="n">no_quadrats_surveyed</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of Quadrats Surveyed&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of quadrats which were surveyed.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">quadrat_area_individual_m2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Individual Quadrat Area [m2]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The area one individual survey quadrat in square meters.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">quadrat_area_total_m2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Total Quadrat Area [m2]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The area all survey quadrats combined in square meters.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Flowering</span>
    <span class="n">flowering_plants_percent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">MinValueValidator</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">MaxValueValidator</span><span class="p">(</span><span class="mi">100</span><span class="p">)],</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Flowering Plants [%]&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The proportion of plants of surveyed population in .&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">clonal_present</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Clonal Peproduction Present&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Was evidence of clonal reproduction found?&quot;</span><span class="p">),)</span>

    <span class="n">vegetative_present</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Vegetative State Present&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Were plants in vegetative state found?&quot;</span><span class="p">),)</span>

    <span class="n">flowerbuds_present</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Flower Buds Present&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Were plants with flower buds found?&quot;</span><span class="p">),)</span>

    <span class="n">flowers_present</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Flowers Present&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Were plants with flowers found?&quot;</span><span class="p">),)</span>

    <span class="n">immature_fruit_present</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Immature Fruit Present&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Were plants with immature fruit found?&quot;</span><span class="p">),)</span>

    <span class="n">ripe_fruit_present</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Ripe Fruit Present&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Were plants with ripe fruit found?&quot;</span><span class="p">),)</span>

    <span class="n">dehisced_fruit_present</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Dehisced Fruit Present&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Were plants with dehisced fruit found?&quot;</span><span class="p">),)</span>

    <span class="c1"># Plant condition</span>
    <span class="n">plant_condition</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">PlantCondition</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Plant condition&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;What condition were most of the plants in?&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Any further comments on the plant population.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Plant Count&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Plant Counts&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_method</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">no_alive_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The total number of alive individuals counted.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_alive_mature</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_alive_juvenile</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_alive_seedlings</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">no_dead_total</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The total number of dead individuals counted.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_dead_mature</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_dead_juvenile</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_dead_seedlings</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="AssociatedSpecies"><a class="viewcode-back" href="../../developers.html#occurrence.models.AssociatedSpecies">[docs]</a><span class="k">class</span> <span class="nc">AssociatedSpecies</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Observation of an associated species.&quot;&quot;&quot;</span>

    <span class="n">taxon</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Taxon</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;associated_species&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Associated Species&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Associated Species&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxon</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="c1"># Individual level observations</span>
<span class="c1">#</span>
<div class="viewcode-block" id="DetectionMethod"><a class="viewcode-back" href="../../developers.html#occurrence.models.DetectionMethod">[docs]</a><span class="k">class</span> <span class="nc">DetectionMethod</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The detection method of an Encounter.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="Confidence"><a class="viewcode-back" href="../../developers.html#occurrence.models.Confidence">[docs]</a><span class="k">class</span> <span class="nc">Confidence</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The confidence of the observer about the correctness of a given observation.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="ReproductiveMaturity"><a class="viewcode-back" href="../../developers.html#occurrence.models.ReproductiveMaturity">[docs]</a><span class="k">class</span> <span class="nc">ReproductiveMaturity</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The reproductive maturity of an animal.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="AnimalHealth"><a class="viewcode-back" href="../../developers.html#occurrence.models.AnimalHealth">[docs]</a><span class="k">class</span> <span class="nc">AnimalHealth</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The health of an animal.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="AnimalSex"><a class="viewcode-back" href="../../developers.html#occurrence.models.AnimalSex">[docs]</a><span class="k">class</span> <span class="nc">AnimalSex</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The sex of an animal.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="CauseOfDeath"><a class="viewcode-back" href="../../developers.html#occurrence.models.CauseOfDeath">[docs]</a><span class="k">class</span> <span class="nc">CauseOfDeath</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The cause of death of an animal.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="SecondarySigns"><a class="viewcode-back" href="../../developers.html#occurrence.models.SecondarySigns">[docs]</a><span class="k">class</span> <span class="nc">SecondarySigns</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Secondary signs of an animal.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="AnimalObservation"><a class="viewcode-back" href="../../developers.html#occurrence.models.AnimalObservation">[docs]</a><span class="k">class</span> <span class="nc">AnimalObservation</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Observation of an Animal.</span>

<span class="sd">    The observation may include several other animals</span>
<span class="sd">    apart from the primarily observed animal.</span>

<span class="sd">    * detection method</span>
<span class="sd">    * Taxonomic identification and confidence</span>
<span class="sd">    * sex</span>
<span class="sd">    * reproductive state</span>
<span class="sd">    * dist features, comments</span>
<span class="sd">    * demographics of all other observed animals</span>
<span class="sd">    * secondary signs</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># detection method: sighting, trapped, spotlighting, remote camera,</span>
    <span class="c1"># remote sensing, oral report, written report, acoustic recorder,</span>
    <span class="c1"># fossil, subfossil, capture, release</span>
    <span class="n">detection_method</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">DetectionMethod</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Detection Method&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;What brought the human observer to the Encounter?&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># species id confidence: guess, certain, expert</span>
    <span class="n">species_id_confidence</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Confidence</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Species ID Confidence&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;How correct is the species ID according to the observer?&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># species identified by (user/name and affiliation): expert changes species in TSC</span>

    <span class="c1"># reproductive state: adult, subadult, juvenile, dependent young</span>
    <span class="n">maturity</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">ReproductiveMaturity</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Reproductive Maturity&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Reproductive Maturity of the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">sex</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">AnimalSex</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Animal Sex&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The sex of the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">health</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">AnimalHealth</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Animal Health&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The health status of the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">cause_of_death</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">CauseOfDeath</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Cause of Death&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The cause of death of the primary observed animal, if applicable.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># primary observed animal: dist feature description</span>
    <span class="n">distinctive_features</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Distinctive features&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Distinctive features of the primary observed animal. &quot;</span>
                    <span class="s2">&quot;Include injuries if applicable.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">actions_taken</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Actions taken&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Any actions taken, if applicable.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">actions_required</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Actions required&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Any actions required, if applicable.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># no_adult_male</span>
    <span class="n">no_adult_male</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of adult males&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Including the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">no_adult_female</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of adult females&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Including the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">no_adult_unknown</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of adult unknown&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Including the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">no_juvenile_male</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of juvenile males&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Including the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">no_juvenile_female</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of juvenile females&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Including the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">no_juvenile_unknown</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of juvenile unknown&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Including the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">no_dependent_young_male</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of dependent_young males&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Including the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">no_dependent_young_female</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of dependent_young females&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Including the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">no_dependent_young_unknown</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Number of dependent_young unknown&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Including the primary observed animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># observation details description</span>
    <span class="n">observation_details</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Observation details&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Any relevant details of the observation.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># secondary signs (select multiple): heard, scats, tracks, diggings, nest/mound,</span>
    <span class="c1"># natural hollow, artificial hollow, burrow, feathers/fur/hair/skin,</span>
    <span class="c1"># bones, egg/eggshell, shell, feeding residue, fauna run, other see comments</span>
    <span class="n">secondary_signs</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span>
        <span class="n">SecondarySigns</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Secondary Signs&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Any observed secondary signs of the animal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Animal Observation&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Animal Observations&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">] </span><span class="si">{1}</span><span class="s2"> </span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">detection_method</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">maturity</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">health</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sum_adult</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The sum of all adults encountered.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_adult_male</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_adult_female</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_adult_unknown</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sum_juvenile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The sum of all juveniles encountered.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_juvenile_male</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_juvenile_female</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_juvenile_unknown</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sum_dependent_young</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The sum of all dependent young encountered.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_dependent_young_male</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_dependent_young_female</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_dependent_young_unknown</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="p">)</span> <span class="ow">or</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sum_observed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The sum of all individuals encountered.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_adult</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_juvenile</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">sum_dependent_young</span></div>


<div class="viewcode-block" id="SampleType"><a class="viewcode-back" href="../../developers.html#occurrence.models.SampleType">[docs]</a><span class="k">class</span> <span class="nc">SampleType</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A type of physical sample or specimen.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="SampleDestination"><a class="viewcode-back" href="../../developers.html#occurrence.models.SampleDestination">[docs]</a><span class="k">class</span> <span class="nc">SampleDestination</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The destination of a physical sample or specimen.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="PermitType"><a class="viewcode-back" href="../../developers.html#occurrence.models.PermitType">[docs]</a><span class="k">class</span> <span class="nc">PermitType</span><span class="p">(</span><span class="n">CodeLabelDescriptionMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The permit type to take a physical sample or specimen.&quot;&quot;&quot;</span>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="PhysicalSample"><a class="viewcode-back" href="../../developers.html#occurrence.models.PhysicalSample">[docs]</a><span class="k">class</span> <span class="nc">PhysicalSample</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Physical sample or specimen taken off an organism.&quot;&quot;&quot;</span>

    <span class="n">sample_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">SampleType</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Sample Type&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing values through the data curation portal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">sample_label</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Sample Label&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The label should be unique within the sample type.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">collector_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Collector ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The unique collector ID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">sample_destination</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">SampleDestination</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Sample Destination&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing values through the data curation portal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">permit_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">PermitType</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Permit Type&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Add missing values through the data curation portal.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">permit_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Permit ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The unique permit ID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Physical Sample&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Physical Samples&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tldr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A text summary of the observation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sample_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sample_label</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="WildlifeIncident"><a class="viewcode-back" href="../../developers.html#occurrence.models.WildlifeIncident">[docs]</a><span class="k">class</span> <span class="nc">WildlifeIncident</span><span class="p">(</span><span class="n">ObservationGroup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Wildlife incident: injury or death. Currently integrated into AnimalObservation.&quot;&quot;&quot;</span>

    <span class="c1"># health</span>
    <span class="c1"># cause of death</span>
    <span class="c1"># injuries description</span>
    <span class="c1"># actions taken</span>
    <span class="c1"># actions required</span>
    <span class="k">pass</span></div>


<span class="c1"># -----------------------------------------------------------------------------</span>
<span class="c1"># TEC Uses: FileAtt, HabComp, AreaAss, HabCond, Thr, FireHist, VegClass,             AssSp</span>
<span class="c1"># TFA Uses: FileAtt,          AreaAss, HabCond, Thr, FireHist, VegClass, AnimalObs,  AssSp, Specimen, WildlInc</span>
<span class="c1"># TFL Uses: FileAtt, HabComp, AreaAss, HabCond, Thr, FireHist,           PlantCount, AssSp, Specimen</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2020 DBCA

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>