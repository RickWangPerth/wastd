

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>taxonomy.models &mdash; WAStD 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> WAStD
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../data_collection/data_collection_overview.html">Data collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_collection/data_collection_admin.html">Data collection administrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_collection/data_collection_training.html">Data collection training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_curators.html">Data curators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_curators.html#data-upload-from-odk">Data upload from ODK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_curators.html#data-qa">Data QA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_curators.html#data-release">Data release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_consumers.html">Data consumers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../business_analysts.html">Business Analysts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../business_analysts.html#how-it-s-made-the-process">How itâ€™s made - the process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../business_analysts.html#reproducible-research">Reproducible Research</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainers.html">Application maintainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers.html">Developer documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">WAStD</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>taxonomy.models</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for taxonomy.models</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Taxonomic models.</span>

<span class="sd">The models in this module maintain a plain copy of WACensus data as published by KMI Geoserver.</span>
<span class="sd">The data is to be inserted and updated via the TSC API.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">unicode_literals</span>

<span class="c1"># import itertools</span>
<span class="c1"># import urllib</span>
<span class="c1"># import slugify</span>
<span class="c1"># from datetime import timedelta</span>
<span class="c1"># from dateutil import tz</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">django.contrib.gis.db</span> <span class="k">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">geo_models</span>
<span class="c1"># from django.core.urlresolvers import reverse</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">django.db.models.signals</span> <span class="k">import</span> <span class="n">pre_save</span>  <span class="c1"># , post_save</span>
<span class="kn">from</span> <span class="nn">django.dispatch</span> <span class="k">import</span> <span class="n">receiver</span>
<span class="c1"># from django.contrib.gis.db import models as geo_models</span>
<span class="c1"># from django.contrib.gis.db.models.query import GeoQuerySet</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="k">import</span> <span class="n">reverse</span>
<span class="c1"># from rest_framework.reverse import reverse as rest_reverse</span>
<span class="c1"># from django.template import loader</span>
<span class="kn">from</span> <span class="nn">django.utils.encoding</span> <span class="k">import</span> <span class="n">python_2_unicode_compatible</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="k">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>
<span class="kn">from</span> <span class="nn">mptt.models</span> <span class="k">import</span> <span class="n">MPTTModel</span><span class="p">,</span> <span class="n">TreeForeignKey</span>
<span class="c1"># from wastd.users.models import User</span>
<span class="kn">from</span> <span class="nn">shared.models</span> <span class="k">import</span> <span class="n">LegacySourceMixin</span><span class="p">,</span> <span class="n">UrlsMixin</span>


<span class="c1"># from django.utils.safestring import mark_safe</span>

<span class="c1"># from durationfield.db.models.fields.duration import DurationField</span>
<span class="c1"># from django.db.models.fields import DurationField</span>
<span class="c1"># from django_fsm import FSMField, transition</span>
<span class="c1"># from django_fsm_log.decorators import fsm_log_by</span>
<span class="c1"># from django_fsm_log.models import StateLog</span>

<span class="c1"># from polymorphic.models import PolymorphicModel</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="HbvSupra"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvSupra">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">HbvSupra</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;HBV Suprafamily Group.</span>

<span class="sd">    {//supra</span>
<span class="sd">      &quot;ogc_fid&quot;: 0,</span>
<span class="sd">      &quot;supra_code&quot;: &quot;ALGA&quot;,</span>
<span class="sd">      &quot;supra_name&quot;: &quot;Alga&quot;,</span>
<span class="sd">      &quot;updated_on&quot;: &quot;2004-12-09Z&quot;,</span>
<span class="sd">      &quot;md5_rowhash&quot;: &quot;ac75154fd5c5b9237d20d833bfe0a506&quot;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ogc_fid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer OGC FeatureID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The OCG Feature ID of the record, used to identify the record.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">supra_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;HBV Suprafamily Group Code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;A short code.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">supra_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;HBV Suprafamily Group Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The group name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus updated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was updated in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">md5_rowhash</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer MD5 rowhash&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An MD5 hash of the record, used to indicate updates.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;supra_code&quot;</span><span class="p">,</span> <span class="p">]</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Paraphyletic Group&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Paraphyletic Groups&quot;</span>
        <span class="c1"># get_latest_by = &quot;added_on&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">supra_name</span></div>


<div class="viewcode-block" id="HbvGroup"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvGroup">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">HbvGroup</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Paraphyletic or informal group of taxa.</span>

<span class="sd">    Maps name_id to supra.</span>

<span class="sd">    {//group</span>
<span class="sd">      &quot;ogc_fid&quot;: 0,</span>
<span class="sd">      &quot;class_id&quot;: &quot;MONOCOT&quot;, # FK to supra</span>
<span class="sd">      &quot;name_id&quot;: 828,</span>
<span class="sd">      &quot;updated_by&quot;: &quot;HERBIE&quot;,</span>
<span class="sd">      &quot;updated_on&quot;: &quot;2011-04-10Z&quot;,</span>
<span class="sd">      &quot;rank_name&quot;: &quot;Species&quot;,</span>
<span class="sd">      &quot;name&quot;: &quot;Eleocharis pallens&quot;,</span>
<span class="sd">      &quot;md5_rowhash&quot;: &quot;fa190f8247844ef8d2a94f73b961ed69&quot;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ogc_fid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer OGC FeatureID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The OCG Feature ID of the record, used to identify the record.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">class_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;HBV Suprafamily Group Code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Updated by&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The person or system who updated this record last in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus updated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was updated in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Taxonomic Rank Name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">md5_rowhash</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer MD5 rowhash&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An MD5 hash of the record, used to indicate updates.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;class_id&quot;</span><span class="p">,</span> <span class="s2">&quot;rank_name&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="p">]</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;HBV Suprafamily Group Membership&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;HBV Suprafamily Group Memberships&quot;</span>
        <span class="c1"># get_latest_by = &quot;added_on&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">] </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">class_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="HbvFamily"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvFamily">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">HbvFamily</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Taxonomic nodes from Families and up from HBVFamilies.</span>

<span class="sd">    {</span>
<span class="sd">      &quot;ogc_fid&quot;: 0,</span>
<span class="sd">      &quot;name_id&quot;: 23206,</span>
<span class="sd">      &quot;kingdom_id&quot;: 4,</span>
<span class="sd">      &quot;rank_id&quot;: 140,</span>
<span class="sd">      &quot;rank_name&quot;: &quot;Family&quot;,</span>
<span class="sd">      &quot;family_name&quot;: &quot;Phragmopelthecaceae&quot;,</span>
<span class="sd">      &quot;is_current&quot;: &quot;Y&quot;,</span>
<span class="sd">      &quot;informal&quot;: null,</span>
<span class="sd">      &quot;comments&quot;: null,</span>
<span class="sd">      &quot;family_code&quot;: &quot;762&quot;,</span>
<span class="sd">      &quot;linear_sequence&quot;: null,</span>
<span class="sd">      &quot;order_nid&quot;: null,</span>
<span class="sd">      &quot;order_name&quot;: null,</span>
<span class="sd">      &quot;class_nid&quot;: null,</span>
<span class="sd">      &quot;class_name&quot;: null,</span>
<span class="sd">      &quot;division_nid&quot;: null,</span>
<span class="sd">      &quot;division_name&quot;: null,</span>
<span class="sd">      &quot;kingdom_name&quot;: &quot;Fungi&quot;,</span>
<span class="sd">      &quot;author&quot;: &quot;L.Xavier&quot;,</span>
<span class="sd">      &quot;editor&quot;: null,</span>
<span class="sd">      &quot;reference&quot;: &quot;Phragmopeltecaceae uma ...&quot;,</span>
<span class="sd">      &quot;supra_code&quot;: &quot;LICHEN&quot;,</span>
<span class="sd">      &quot;added_on&quot;: &quot;2004-12-09Z&quot;,</span>
<span class="sd">      &quot;updated_on&quot;: &quot;2016-08-30Z&quot;,</span>
<span class="sd">      &quot;md5_rowhash&quot;: &quot;2b9aaba4c145701f540c40db4fde6071&quot;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ogc_fid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer OGC FeatureID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The OCG Feature ID of the record, &quot;</span>
                    <span class="s2">&quot;used to identify the record.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Taxonomic Rank ID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Taxonomic Rank Name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">family_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Family Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">is_current</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is name current?&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus currency status.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">informal</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name approval status&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The approval status indicates whether a taxonomic name&quot;</span>
                    <span class="s2">&quot; is a phrase name (PN), manuscript name (MS) or published (blank).&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments about the name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">family_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Family Code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Family Code, deprecated, no not use.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">linear_sequence</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Linear sequence&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Always populated for plant families, may be blank for other names.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">order_nid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Order NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">order_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Order Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">class_nid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Class NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">class_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Class&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">division_nid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Division NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">division_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Division&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">kingdom_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Kingdom ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Kingdom ID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">kingdom_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Kingdom&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Author&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Author&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">editor</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Editor&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The rditor of the journal the name was published in.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">reference</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Reference&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The citation for the reference article this name was published in.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">supra_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;HBV Suprafamily Group Code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">added_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus added on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was added to WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus updated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was updated in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">md5_rowhash</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer MD5 rowhash&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An MD5 hash of the record, used to indicate updates.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;kingdom_name&quot;</span><span class="p">,</span> <span class="s2">&quot;division_name&quot;</span><span class="p">,</span> <span class="s2">&quot;class_name&quot;</span><span class="p">,</span> <span class="s2">&quot;order_name&quot;</span><span class="p">,</span> <span class="s2">&quot;family_name&quot;</span><span class="p">,</span> <span class="p">]</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;HBV Family&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;HBV Families&quot;</span>
        <span class="c1"># get_latest_by = &quot;added_on&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">family_name</span></div>


<div class="viewcode-block" id="HbvGenus"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvGenus">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">HbvGenus</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Taxonomic Genera.</span>

<span class="sd">    {//genera</span>
<span class="sd">      &quot;ogc_fid&quot;: 0,</span>
<span class="sd">      &quot;name_id&quot;: 44200,</span>
<span class="sd">      &quot;kingdom_id&quot;: 4,</span>
<span class="sd">      &quot;rank_id&quot;: 180,</span>
<span class="sd">      &quot;rank_name&quot;: &quot;Genus&quot;,</span>
<span class="sd">      &quot;genus&quot;: &quot;Xalocoa&quot;,</span>
<span class="sd">      &quot;is_current&quot;: &quot;Y&quot;,</span>
<span class="sd">      &quot;informal&quot;: null,</span>
<span class="sd">      &quot;comments&quot;: null,</span>
<span class="sd">      &quot;family_code&quot;: null,</span>
<span class="sd">      &quot;family_nid&quot;: 23171, # FK Families</span>
<span class="sd">      &quot;author&quot;: &quot;Kraichak, LÃ¼cking &amp; Lumbsch&quot;,</span>
<span class="sd">      &quot;editor&quot;: null,</span>
<span class="sd">      &quot;reference&quot;: &quot;Austral.Syst.Bot. 26:472 (2014)&quot;,</span>
<span class="sd">      &quot;genusid&quot;: 44200,</span>
<span class="sd">      &quot;added_on&quot;: &quot;2014-05-18Z&quot;,</span>
<span class="sd">      &quot;updated_on&quot;: &quot;2014-05-18Z&quot;,</span>
<span class="sd">      &quot;md5_rowhash&quot;: &quot;88bd0e2944e7ac09bdc08adafb453a66&quot;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ogc_fid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer OGC FeatureID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The OCG Feature ID of the record, used to identify the record.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">kingdom_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="c1"># refactor: FK Kingdom</span>
        <span class="c1"># default: request.user.default_kingdom</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Kingdom ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Kingdom ID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Taxonomic Rank ID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Taxonomic Rank Name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">genus</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Genus&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The Genus name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">is_current</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is name current?&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus currency status.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">informal</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name approval status&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The approval status indicates whether a taxonomic name&quot;</span>
                    <span class="s2">&quot; is a phrase name (PN), manuscript name (MS) or published (blank).&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments about the name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">family_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Family Code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Family Code, deprecated, no not use.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">family_nid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="c1"># refactor: FK Family</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Family NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Family NameID&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Author&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Author&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">editor</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Editor&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The rditor of the journal the name was published in.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">reference</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Reference&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The citation for the reference article this name was published in.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">genusid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Genus ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Genus ID&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">added_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus added on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was added to WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus updated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was updated in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">md5_rowhash</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer MD5 rowhash&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An MD5 hash of the record, used to indicate updates.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;kingdom_id&quot;</span><span class="p">,</span> <span class="s2">&quot;family_nid&quot;</span><span class="p">,</span> <span class="s2">&quot;genusid&quot;</span><span class="p">,</span> <span class="p">]</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;HBV Genus&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;HBV Genera&quot;</span>
        <span class="c1"># get_latest_by = &quot;added_on&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">genus</span></div>


<div class="viewcode-block" id="HbvSpecies"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvSpecies">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">HbvSpecies</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Taxonomic species names.</span>

<span class="sd">    {</span>
<span class="sd">      &quot;ogc_fid&quot;: 1,</span>
<span class="sd">      &quot;name_id&quot;: 11724,</span>
<span class="sd">      &quot;kingdom_id&quot;: 3,</span>
<span class="sd">      &quot;rank_id&quot;: 240,</span>
<span class="sd">      &quot;rank_name&quot;: &quot;Variety&quot;,</span>
<span class="sd">      &quot;family_code&quot;: &quot;162&quot;,</span>
<span class="sd">      &quot;family_nid&quot;: 34857,</span>
<span class="sd">      &quot;genus&quot;: &quot;Pultenaea&quot;, # = HbvTaxon.name1</span>
<span class="sd">      &quot;species&quot;: &quot;verruculosa&quot;, # = HbvTaxon.name2</span>
<span class="sd">      &quot;infra_rank&quot;: &quot;var.&quot;, # HbvTaxon.rank3</span>
<span class="sd">      &quot;infra_name&quot;: &quot;verruculosa&quot;, # HbvTaxon.name3</span>
<span class="sd">      &quot;infra_rank2&quot;: null, # HbvTaxon.rank4</span>
<span class="sd">      &quot;infra_name2&quot;: null, # HbvTaxon.name4</span>
<span class="sd">      &quot;author&quot;: &quot;Turcz.&quot;,</span>
<span class="sd">      &quot;editor&quot;: null,</span>
<span class="sd">      &quot;reference&quot;: null,</span>
<span class="sd">      &quot;comments&quot;: null,</span>
<span class="sd">      &quot;vernacular&quot;: null,</span>
<span class="sd">      &quot;all_vernaculars&quot;: null,</span>
<span class="sd">      &quot;species_name&quot;: &quot;Pultenaea verruculosa var. verruculosa&quot;, # HbvTaxon.name</span>
<span class="sd">      &quot;species_code&quot;: &quot;PULVERVER&quot;, # the one for lookups</span>
<span class="sd">      &quot;is_current&quot;: &quot;N&quot;,</span>
<span class="sd">      &quot;naturalised&quot;: null,</span>
<span class="sd">      &quot;naturalised_status&quot;: &quot;N&quot;,</span>
<span class="sd">      &quot;naturalised_certainty&quot;: null,</span>
<span class="sd">      &quot;is_eradicated&quot;: null,</span>
<span class="sd">      &quot;naturalised_comments&quot;: null,</span>
<span class="sd">      &quot;informal&quot;: null,</span>
<span class="sd">      &quot;added_on&quot;: &quot;1991-12-31Z&quot;,</span>
<span class="sd">      &quot;updated_on&quot;: &quot;2004-12-09Z&quot;,</span>
<span class="sd">      &quot;consv_code&quot;: null,</span>
<span class="sd">      &quot;ranking&quot;: null,</span>
<span class="sd">      &quot;linear_sequence&quot;: null,</span>
<span class="sd">      &quot;md5_rowhash&quot;: &quot;387d5ee88472d3f6f300f3b677ae475a&quot;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ogc_fid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer OGC FeatureID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The OCG Feature ID of the record, used to identify the record.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus updated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was updated in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">kingdom_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="c1"># refactor: FK Kingdom</span>
        <span class="c1"># default: request.user.default_kingdom</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Kingdom ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Kingdom ID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Taxonomic Rank ID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Taxonomic Rank Name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">family_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Family Code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Family Code, deprecated, no not use.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">family_nid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="c1"># refactor: FK Family</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Family NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Family NameID&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># &quot;genus&quot;: &quot;Pultenaea&quot;, # = HbvTaxon.name1</span>
    <span class="c1"># &quot;species&quot;: &quot;verruculosa&quot;, # = HbvTaxon.name2</span>
    <span class="c1"># &quot;infra_rank&quot;: &quot;var.&quot;, # HbvTaxon.rank3</span>
    <span class="c1"># &quot;infra_name&quot;: &quot;verruculosa&quot;, # HbvTaxon.name3</span>
    <span class="c1"># &quot;infra_rank2&quot;: null, # HbvTaxon.rank4</span>
    <span class="c1"># &quot;infra_name2&quot;: null, # HbvTaxon.name4</span>

    <span class="n">genus</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Genus&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxon name if taxon is of rank kingdom to subgenus.&quot;</span>
                    <span class="s2">&quot; Genus if taxon is of rank species or below.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">species</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Species&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Empty if taxon is of rank kingdom to subgenus.&quot;</span>
                    <span class="s2">&quot; Specific epithet if taxon is of rank species or below.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">infra_rank</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank after species&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whichever rank comes after the species epithet: &quot;</span>
                    <span class="s2">&quot;subsp, var, forma, subforma.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">infra_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name after species name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whichever name comes after infra_rank.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">infra_rank2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Lowest rank&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whichever rank comes after infra_name: &quot;</span>
                    <span class="s2">&quot;var, forma, subforma.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">infra_name2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Lowest name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whichever name comes after infra_rank2.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Author&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Author&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">editor</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Editor&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The rditor of the journal the name was published in.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">reference</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Reference&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The citation for the reference article this name was published in.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments about the name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">vernacular</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Preferred Vernacular Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Preferred Vernacular Name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">all_vernaculars</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;All Vernacular Names&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;All Vernacular Names in order of preference&quot;</span>
                    <span class="s2">&quot; including preferred vernacular name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">species_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;Built by WACensus by concatenating all name fields, &quot;</span>
            <span class="s2">&quot;excluding author and editor. Phrase names may contain authors.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">species_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Species Code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus species shortcode, used for data entry.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">is_current</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is name current?&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus currency status.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">naturalised</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalised&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">naturalised_status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation status&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation status.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">naturalised_certainty</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation certainty&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation certainty.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">naturalised_comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation comments&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation comments.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">is_eradicated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is eradicated?&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whether taxon is eradicated or not.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">informal</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name approval status&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The approval status indicates whether a taxonomic name&quot;</span>
                    <span class="s2">&quot; is a phrase name (PN), manuscript name (MS) or published (blank).&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">added_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus added on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was added to WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus updated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was updated in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">consv_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Conservation Code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">ranking</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Ranking&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">linear_sequence</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Linear sequence&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Always populated for plant families, may be blank for other names.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">md5_rowhash</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer MD5 rowhash&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An MD5 hash of the record, used to indicate updates.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;kingdom_id&quot;</span><span class="p">,</span> <span class="s2">&quot;genus&quot;</span><span class="p">,</span> <span class="s2">&quot;species&quot;</span><span class="p">]</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;HBV Species&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;HBV Species&quot;</span>
        <span class="c1"># get_latest_by = &quot;added_on&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">] </span><span class="si">{1}</span><span class="s2"> </span><span class="si">{2}</span><span class="s2"> (</span><span class="si">{3}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">species_name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">species_code</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="HbvName"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvName">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">HbvName</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Taxonomic Names from HBVnames.</span>

<span class="sd">    Each Taxon has a unique, never re-used, ``name_id``.</span>

<span class="sd">    Data are refreshed (overwritten) from</span>
<span class="sd">    `KMI HBVnames &lt;https://kmi.dbca.wa.gov.au/geoserver/dpaw/ows?</span>
<span class="sd">    service=WFS&amp;version=2.0.0&amp;request=GetFeature</span>
<span class="sd">    &amp;typeName=dpaw:herbie_hbvnames&amp;maxFeatures=50&amp;outputFormat=application%2Fjson&gt;`_</span>

<span class="sd">    Example taxon:</span>
<span class="sd">    {</span>
<span class="sd">      &quot;type&quot;: &quot;Feature&quot;,</span>
<span class="sd">      &quot;id&quot;: &quot;herbie_hbvnames.fid-3032fae6_1619d7978c8_-6031&quot;,</span>
<span class="sd">      &quot;geometry&quot;: null,</span>
<span class="sd">      &quot;properties&quot;: {</span>
<span class="sd">        &quot;ogc_fid&quot;: 0,</span>
<span class="sd">        &quot;name_id&quot;: 20887,</span>
<span class="sd">        &quot;kingdom_id&quot;: 3,</span>
<span class="sd">        &quot;rank_id&quot;: 180,</span>
<span class="sd">        &quot;rank_name&quot;: &quot;Genus&quot;,</span>
<span class="sd">        &quot;name1&quot;: &quot;Paraceterach&quot;,</span>
<span class="sd">        &quot;name2&quot;: null,</span>
<span class="sd">        &quot;rank3&quot;: null,</span>
<span class="sd">        &quot;name3&quot;: null,</span>
<span class="sd">        &quot;rank4&quot;: null,</span>
<span class="sd">        &quot;name4&quot;: null,</span>
<span class="sd">        &quot;pub_id&quot;: 582,</span>
<span class="sd">        &quot;vol_info&quot;: &quot;75&quot;,</span>
<span class="sd">        &quot;pub_year&quot;: 1947,</span>
<span class="sd">        &quot;is_current&quot;: &quot;Y&quot;,</span>
<span class="sd">        &quot;origin&quot;: null,</span>
<span class="sd">        &quot;naturalised_status&quot;: null,</span>
<span class="sd">        &quot;naturalised_certainty&quot;: null,</span>
<span class="sd">        &quot;is_eradicated&quot;: null,</span>
<span class="sd">        &quot;naturalised_comments&quot;: null,</span>
<span class="sd">        &quot;informal&quot;: null,</span>
<span class="sd">        &quot;form_desc_yr&quot;: null,</span>
<span class="sd">        &quot;form_desc_mn&quot;: null,</span>
<span class="sd">        &quot;form_desc_dy&quot;: null,</span>
<span class="sd">        &quot;comments&quot;: null,</span>
<span class="sd">        &quot;added_by&quot;: &quot;HERBIE&quot;,</span>
<span class="sd">        &quot;added_on&quot;: &quot;2004-12-09Z&quot;,</span>
<span class="sd">        &quot;updated_by&quot;: &quot;SUEC&quot;,</span>
<span class="sd">        &quot;updated_on&quot;: &quot;2010-02-03Z&quot;,</span>
<span class="sd">        &quot;family_code&quot;: &quot;008&quot;,</span>
<span class="sd">        &quot;family_nid&quot;: 22721,</span>
<span class="sd">        &quot;name&quot;: &quot;Paraceterach&quot;,</span>
<span class="sd">        &quot;full_name&quot;: &quot;Paraceterach\nCopel.&quot;,</span>
<span class="sd">        &quot;author&quot;: &quot;Copel.&quot;,</span>
<span class="sd">        &quot;reference&quot;: &quot;Gen.Fil.\n75\n(1947)&quot;,</span>
<span class="sd">        &quot;editor&quot;: null,</span>
<span class="sd">        &quot;vernacular&quot;: null,</span>
<span class="sd">        &quot;all_vernaculars&quot;: null,</span>
<span class="sd">        &quot;linear_sequence&quot;: null,</span>
<span class="sd">        &quot;md5_rowhash&quot;: &quot;f3e900990365c28fc9d15fe5e4090aa1&quot;</span>
<span class="sd">      }</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;Built by WACensus by concatenating all name fields, &quot;</span>
            <span class="s2">&quot;excluding author and editor. Phrase names may contain authors.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">full_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Full Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;Built by WACensus by concatenating all name fields, &quot;</span>
            <span class="s2">&quot;including author and editor.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">vernacular</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Preferred Vernacular Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Preferred Vernacular Name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">all_vernaculars</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;All Vernacular Names&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;All Vernacular Names in order of preference&quot;</span>
                    <span class="s2">&quot; including preferred vernacular name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">kingdom_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="c1"># refactor: FK Kingdom</span>
        <span class="c1"># default: request.user.default_kingdom</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Kingdom ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Kingdom ID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">family_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Family Code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Family Code, deprecated, no not use.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">family_nid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="c1"># refactor: FK Family</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Family NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Family NameID&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Taxonomic Rank ID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Taxonomic Rank Name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name1</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name 1&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxon name if taxon is of rank kingdom to subgenus.&quot;</span>
                    <span class="s2">&quot; Genus if taxon is of rank species or below.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name 2&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Empty if taxon is of rank kingdom to subgenus.&quot;</span>
                    <span class="s2">&quot; Specific epithet if taxon is of rank species or below.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank 3&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whichever rank comes after the species epithet: &quot;</span>
                    <span class="s2">&quot;subsp, var, forma, subforma.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name 3&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whichever name comes after rank 3.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank4</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Rank 4&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whichever rank comes after name 3: &quot;</span>
                    <span class="s2">&quot;var, forma, subforma.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name4</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name 4&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whichever name comes after rank 4.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Author&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Author&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">editor</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Editor&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The rditor of the journal the name was published in.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">reference</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Reference&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The citation for the reference article this name was published in.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">pub_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Publication ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus Publication ID&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">vol_info</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Journal Volume Number&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Journal Volume Number.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">pub_year</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Publication Year&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Publication Year.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">form_desc_yr</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Described on (year)&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Year of first description.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">form_desc_mn</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Described on (month)&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Month of first description.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">form_desc_dy</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Described on (day)&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Day of first description.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">is_current</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is name current?&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus currency status.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">origin</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Origin&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Deprecated. * = introduced into WA.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">naturalised_status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation status&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation status.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">naturalised_certainty</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation certainty&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation certainty.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">naturalised_comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation comments&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Naturalisation comments.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">is_eradicated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is eradicated?&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whether taxon is eradicated or not.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">informal</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name approval status&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The approval status indicates whether a taxonomic name&quot;</span>
                    <span class="s2">&quot; is a phrase name (PN), manuscript name (MS) or &quot;</span>
                    <span class="s2">&quot;published (blank).&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxon code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;If available, the DBCA six-letter code used in MAX.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments about the name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">added_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Added by&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The person or system who added this record to WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">added_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus added on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was added to WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Updated by&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The person or system who updated this record &quot;</span>
                    <span class="s2">&quot;last in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus updated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was updated in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">linear_sequence</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Linear sequence&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Always populated for plant families,&quot;</span>
                    <span class="s2">&quot; may be blank for other names.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1">#    &quot;md5_rowhash&quot;: &quot;f3e900990365c28fc9d15fe5e4090aa1&quot;</span>
    <span class="n">md5_rowhash</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer MD5 rowhash&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An MD5 hash of the record, used to indicate updates.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">ogc_fid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer OGC FeatureID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The OCG Feature ID of the record, used to &quot;</span>
                    <span class="s2">&quot;identify the record.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;kingdom_id&quot;</span><span class="p">,</span> <span class="s2">&quot;family_nid&quot;</span><span class="p">,</span> <span class="s2">&quot;name_id&quot;</span><span class="p">]</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;HBV Name&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;HBV Names&quot;</span>
        <span class="c1"># get_latest_by = &quot;added_on&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">] </span><span class="si">{1}</span><span class="s2"> (</span><span class="si">{2}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">full_name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vernacular</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="HbvName.taxonomic_synonyms"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvName.taxonomic_synonyms">[docs]</a>    <span class="k">def</span> <span class="nf">taxonomic_synonyms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;TODO Return all taxonomic synonyms.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div>

<div class="viewcode-block" id="HbvName.nomenclatural_synonyms"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvName.nomenclatural_synonyms">[docs]</a>    <span class="k">def</span> <span class="nf">nomenclatural_synonyms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;TODO Return all nonenclatural synonyms.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div>

<div class="viewcode-block" id="HbvName.current_names"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvName.current_names">[docs]</a>    <span class="k">def</span> <span class="nf">current_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;TODO Return all current name(s).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="HbvVernacular"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvVernacular">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">HbvVernacular</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Taxonomic vernacular names.</span>

<span class="sd">    {//vernacular</span>
<span class="sd">      &quot;ogc_fid&quot;: 0,</span>
<span class="sd">      &quot;name_id&quot;: 828,</span>
<span class="sd">      &quot;name&quot;: &quot;Eleocharis pallens&quot;,</span>
<span class="sd">      &quot;vernacular&quot;: &quot;Pale Spikerush&quot;,</span>
<span class="sd">      &quot;language&quot;: &quot;ENGLISH&quot;,</span>
<span class="sd">      &quot;lang_pref&quot;: null,</span>
<span class="sd">      &quot;preferred&quot;: &quot;Y&quot;,</span>
<span class="sd">      &quot;source&quot;: &quot;E.M. Bennett&quot;,</span>
<span class="sd">      &quot;updated_by&quot;: &quot;HERBIE&quot;,</span>
<span class="sd">      &quot;updated_on&quot;: &quot;2004-12-09Z&quot;,</span>
<span class="sd">      &quot;md5_rowhash&quot;: &quot;3694af72bc5e906f2d9919c736ad99fe&quot;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ogc_fid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer OGC FeatureID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The OCG Feature ID of the record, used to &quot;</span>
                    <span class="s2">&quot;identify the record.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">vernacular</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Vernacular Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span>
            <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">language</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Language&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The language of the vernacular name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">lang_pref</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Preferred within given language&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whether the vernacular name is the preferred &quot;</span>
                    <span class="s2">&quot;name within the given language.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">preferred</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Preferred vernacular name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whether this vernacular name is the preferred one &quot;</span>
                    <span class="s2">&quot;out of all vernacular names for the given NameID.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">source</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The source of the vernacular name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Updated by&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The person or system who updated this record &quot;</span>
                    <span class="s2">&quot;last in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus updated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was updated in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">md5_rowhash</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer MD5 rowhash&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An MD5 hash of the record, used to indicate updates.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="c1"># ordering = [&quot;kingdom_id&quot;, &quot;family_nid&quot;, &quot;name_id&quot;]</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;HBV Vernacular Name&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;HBV Vernacular Names&quot;</span>
        <span class="c1"># get_latest_by = &quot;added_on&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vernacular</span></div>


<div class="viewcode-block" id="HbvXref"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvXref">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">HbvXref</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Taxonomic operations on NameIDs.</span>

<span class="sd">    {//xrefs</span>
<span class="sd">      &quot;ogc_fid&quot;: 0,</span>
<span class="sd">      &quot;xref_id&quot;: 1,</span>
<span class="sd">      &quot;old_name_id&quot;: 8288,</span>
<span class="sd">      &quot;new_name_id&quot;: null,</span>
<span class="sd">      &quot;xref_type&quot;: &quot;EXC&quot;,</span>
<span class="sd">      &quot;active&quot;: &quot;Y&quot;,</span>
<span class="sd">      &quot;authorised_by&quot;: null,</span>
<span class="sd">      &quot;authorised_on&quot;: &quot;        &quot;,</span>
<span class="sd">      &quot;comments&quot;: null,</span>
<span class="sd">      &quot;added_on&quot;: &quot;1990-12-03Z&quot;,</span>
<span class="sd">      &quot;updated_on&quot;: null,</span>
<span class="sd">      &quot;md5_rowhash&quot;: &quot;8a0bb19a2dad98dbe92dbc0caad58eb9&quot;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ogc_fid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer OGC FeatureID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The OCG Feature ID of the record, used to &quot;</span>
                    <span class="s2">&quot;identify the record in GeoServer.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">xref_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus xref ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The WACensus xref ID of the record, used to &quot;</span>
                    <span class="s2">&quot;identify the record in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">old_name_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Old NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">new_name_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;New NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">xref_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;MIS&quot;</span><span class="p">,</span> <span class="s2">&quot;Misapplied name&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;TSY&quot;</span><span class="p">,</span> <span class="s2">&quot;Taxonomic synonym&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;NSY&quot;</span><span class="p">,</span> <span class="s2">&quot;Nomenclatural synonym&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;EXC&quot;</span><span class="p">,</span> <span class="s2">&quot;Excluded name&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;CON&quot;</span><span class="p">,</span> <span class="s2">&quot;Concept change&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;FOR&quot;</span><span class="p">,</span> <span class="s2">&quot;Formal description&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;OGV&quot;</span><span class="p">,</span> <span class="s2">&quot;Orthographic variant&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;ERR&quot;</span><span class="p">,</span> <span class="s2">&quot;Name in error&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;ISY&quot;</span><span class="p">,</span> <span class="s2">&quot;Informal Synonym&quot;</span><span class="p">),</span>
            <span class="c1"># ISY: non-current name pointing to another non-current name</span>
        <span class="p">),</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The taxonomic type of this crossreference.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">active</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Active&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Inactive crossrefrences are considered deleted.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">authorised_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus authorised by&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The person or system who authorised this record &quot;</span>
                    <span class="s2">&quot;last in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">authorised_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus authorised on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was authorised in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments are words to clarify things.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">added_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus added on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was added to WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus updated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was updated in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">md5_rowhash</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer MD5 rowhash&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An MD5 hash of the record, used to indicate updates.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;authorised_on&quot;</span><span class="p">,</span> <span class="p">]</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;HBV Crossreference&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;HBV Crossreferences&quot;</span>
        <span class="c1"># get_latest_by = &quot;added_on&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2"> </span><span class="si">{2}</span><span class="s2"> on </span><span class="si">{3}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">old_name_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xref_type</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">new_name_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authorised_on</span><span class="p">)</span></div>


<div class="viewcode-block" id="HbvParent"><a class="viewcode-back" href="../../developers.html#taxonomy.models.HbvParent">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">HbvParent</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Taxonomic inheritance: name_id is child of parent_nid.</span>

<span class="sd">    {&quot;ogc_fid&quot;: 0,</span>
<span class="sd">    &quot;name_id&quot;: 1,</span>
<span class="sd">    &quot;class_id&quot;: &quot;WAH&quot;,</span>
<span class="sd">    &quot;parent_nid&quot;: 20872,</span>
<span class="sd">    &quot;updated_by&quot;: &quot;HERBIE&quot;,</span>
<span class="sd">    &quot;updated_on&quot;: &quot;2004-12-09Z&quot;,</span>
<span class="sd">    &quot;md5_rowhash&quot;: &quot;dea886a27ece6a629387fc3ba34392ef&quot;}</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">ogc_fid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer OGC FeatureID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The OCG Feature ID of the record, used to &quot;</span>
                    <span class="s2">&quot;identify the record in GeoServer.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">class_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus ClassID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">parent_nid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Updated by&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The person or system who updated this record &quot;</span>
                    <span class="s2">&quot;last in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">updated_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus updated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was updated in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">md5_rowhash</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer MD5 rowhash&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An MD5 hash of the record, used to indicate updates.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ogc_fid&quot;</span><span class="p">,</span> <span class="p">]</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;HBV Parent&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;HBV Parents&quot;</span>
        <span class="c1"># get_latest_by = &quot;added_on&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> is child of </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parent_nid</span><span class="p">)</span></div>


<span class="c1"># django-mptt tree models ----------------------------------------------------#</span>
<div class="viewcode-block" id="Taxon"><a class="viewcode-back" href="../../developers.html#taxonomy.models.Taxon">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">Taxon</span><span class="p">(</span><span class="n">UrlsMixin</span><span class="p">,</span> <span class="n">MPTTModel</span><span class="p">,</span> <span class="n">geo_models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A taxonomic name at any taxonomic rank.</span>

<span class="sd">    A taxonomy is a directed graph with exactly one root node (Domain) and</span>
<span class="sd">    child nodes at every known rank. Each node has exactly one parent node,</span>
<span class="sd">    and can thus infer its taxonomic parentage.</span>

<span class="sd">    Each rank can build its correct name based on different rules for each rank.</span>
<span class="sd">    Ranks are stored as SmallIntegerField, so that lookups against ranks are fast.</span>

<span class="sd">    Status contains the taxon name&quot;s life cycle:</span>

<span class="sd">    * A phrase name is created for possibly unknown specimens.</span>
<span class="sd">    * A manuscript name is &lt;insert definition&gt;.</span>
<span class="sd">    * A formally published name is current.</span>
<span class="sd">    * Taxonomic events (xref types) can render a name non-current.</span>
<span class="sd">    * Taxonomic events can involve more than one name.</span>

<span class="sd">    A legally gazetted name is published every year for names with conservation status.</span>
<span class="sd">    The gazettal process can lag behind the publication process by up to a year at the</span>
<span class="sd">    current rate of gazettal (annual).</span>

<span class="sd">    Get Parents: https://stackoverflow.com/a/6565577/2813717</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">RANK_THING</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">RANK_DOMAIN</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">RANK_COMMUNITY</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">RANK_KINGDOM</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">RANK_SUBKINGDOM</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">RANK_DIVISION</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">RANK_SUBDIVISION</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">RANK_CLASS</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">RANK_SUBCLASS</span> <span class="o">=</span> <span class="mi">60</span>
    <span class="n">RANK_ORDER</span> <span class="o">=</span> <span class="mi">70</span>
    <span class="n">RANK_SUBORDER</span> <span class="o">=</span> <span class="mi">80</span>
    <span class="n">RANK_FAMILY</span> <span class="o">=</span> <span class="mi">90</span>
    <span class="n">RANK_SUBFAMILY</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">RANK_TRIBE</span> <span class="o">=</span> <span class="mi">110</span>
    <span class="n">RANK_SUBTRIBE</span> <span class="o">=</span> <span class="mi">120</span>
    <span class="n">RANK_GENUS</span> <span class="o">=</span> <span class="mi">130</span>
    <span class="n">RANK_SUBGENUS</span> <span class="o">=</span> <span class="mi">140</span>
    <span class="n">RANK_SECTION</span> <span class="o">=</span> <span class="mi">150</span>
    <span class="n">RANK_SUBSECTION</span> <span class="o">=</span> <span class="mi">160</span>
    <span class="n">RANK_SERIES</span> <span class="o">=</span> <span class="mi">170</span>
    <span class="n">RANK_SUBSERIES</span> <span class="o">=</span> <span class="mi">180</span>
    <span class="n">RANK_SPECIES</span> <span class="o">=</span> <span class="mi">190</span>
    <span class="n">RANK_SUBSPECIES</span> <span class="o">=</span> <span class="mi">200</span>
    <span class="n">RANK_VARIETY</span> <span class="o">=</span> <span class="mi">210</span>
    <span class="n">RANK_SUBVARIETY</span> <span class="o">=</span> <span class="mi">220</span>
    <span class="n">RANK_FORMA</span> <span class="o">=</span> <span class="mi">230</span>
    <span class="n">RANK_SUBFORMA</span> <span class="o">=</span> <span class="mi">240</span>

    <span class="n">RANKS</span> <span class="o">=</span> <span class="p">(</span>
        <span class="c1"># (RANK_THING, &quot;Thing&quot;),</span>
        <span class="c1"># (RANK_COMMUNITY, &quot;Community&quot;),</span>
        <span class="p">(</span><span class="n">RANK_DOMAIN</span><span class="p">,</span> <span class="s2">&quot;Domain&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_KINGDOM</span><span class="p">,</span> <span class="s2">&quot;Kingdom&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBKINGDOM</span><span class="p">,</span> <span class="s2">&quot;Subkingdom&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_DIVISION</span><span class="p">,</span> <span class="s2">&quot;Division&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBDIVISION</span><span class="p">,</span> <span class="s2">&quot;Subdivision&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_CLASS</span><span class="p">,</span> <span class="s2">&quot;Class&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBCLASS</span><span class="p">,</span> <span class="s2">&quot;Subclass&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_ORDER</span><span class="p">,</span> <span class="s2">&quot;Order&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBORDER</span><span class="p">,</span> <span class="s2">&quot;Suborder&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_FAMILY</span><span class="p">,</span> <span class="s2">&quot;Family&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBFAMILY</span><span class="p">,</span> <span class="s2">&quot;Subfamily&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_TRIBE</span><span class="p">,</span> <span class="s2">&quot;Tribe&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBTRIBE</span><span class="p">,</span> <span class="s2">&quot;Subtribe&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_GENUS</span><span class="p">,</span> <span class="s2">&quot;Genus&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBGENUS</span><span class="p">,</span> <span class="s2">&quot;Subgenus&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SECTION</span><span class="p">,</span> <span class="s2">&quot;Section&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBSECTION</span><span class="p">,</span> <span class="s2">&quot;Subsection&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SERIES</span><span class="p">,</span> <span class="s2">&quot;Series&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBSERIES</span><span class="p">,</span> <span class="s2">&quot;Subseries&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SPECIES</span><span class="p">,</span> <span class="s2">&quot;Species&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBSPECIES</span><span class="p">,</span> <span class="s2">&quot;Subspecies&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_VARIETY</span><span class="p">,</span> <span class="s2">&quot;Variety&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBVARIETY</span><span class="p">,</span> <span class="s2">&quot;Subvariety&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_FORMA</span><span class="p">,</span> <span class="s2">&quot;Forma&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">RANK_SUBFORMA</span><span class="p">,</span> <span class="s2">&quot;Subforma&quot;</span><span class="p">)</span>

    <span class="p">)</span>

    <span class="n">PUBLICATION_STATUS_PHRASE_NAME</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">PUBLICATION_STATUS_MANUSCRIPT_NAME</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">PUBLICATION_STATUS_PUBLISHED_NAME</span> <span class="o">=</span> <span class="mi">2</span>

    <span class="n">PUBLICATION_STATUS</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">PUBLICATION_STATUS_PHRASE_NAME</span><span class="p">,</span> <span class="s2">&quot;Phrase Name&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">PUBLICATION_STATUS_MANUSCRIPT_NAME</span><span class="p">,</span> <span class="s2">&quot;Manuscript Name&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">PUBLICATION_STATUS_PUBLISHED_NAME</span><span class="p">,</span> <span class="s2">&quot;Published Name&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;NameID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus NameID, assigned by WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">parent</span> <span class="o">=</span> <span class="n">TreeForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;self&quot;</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;children&quot;</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Parent Taxon&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The lowest known parent taxon.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">paraphyletic_groups</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span>
        <span class="n">HbvSupra</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Paraphyletic Groups&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;All paraphyletic groups this taxon belongs to.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">rank</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveSmallIntegerField</span><span class="p">(</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">RANKS</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Rank&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The taxonomic rank of the taxon.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxon Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The taxon name.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">canonical_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Canonical Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The canonical name.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">taxonomic_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The taxonomic name.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">vernacular_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Preferred English Vernacular Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The preferred english vernacular name.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">field_code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Field collection code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The agreed acronym, often used on paper datasheets.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">vernacular_names</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;All Vernacular Names&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;A list of all vernacular names.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Author&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxonomic Author&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">publication_status</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveSmallIntegerField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">PUBLICATION_STATUS</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">PUBLICATION_STATUS_PUBLISHED_NAME</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Publication Status&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;On what level the name is published.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">current</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is current&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whether the name is current.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">eoo</span> <span class="o">=</span> <span class="n">geo_models</span><span class="o">.</span><span class="n">PolygonField</span><span class="p">(</span>
        <span class="n">srid</span><span class="o">=</span><span class="mi">4326</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Extent of Occurrence&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The extent of occurrence as polygon in WGS84, if available.&quot;</span><span class="p">))</span>

    <span class="c1"># Approval Status FSM: [phrase name, ms name, current name, non-current name]</span>
    <span class="c1"># status = FSMField(default=STATUS_NEW, choices=STATUS_CHOICES, verbose_name=_(&quot;QA Status&quot;))</span>

    <span class="k">class</span> <span class="nc">MPTTMeta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;MPTT Class options.&quot;&quot;&quot;</span>

        <span class="n">order_insertion_by</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;name_id&quot;</span><span class="p">]</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-rank&#39;</span><span class="p">,</span> <span class="s1">&#39;current&#39;</span><span class="p">]</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Taxon&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Taxa&quot;</span>
        <span class="c1"># ordering = [&#39;-rank&#39;, &#39;current&#39;]</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The full name: [NameID] (RANK) TAXONOMIC NAME.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">][</span><span class="si">{1}</span><span class="s2">] (</span><span class="si">{2}</span><span class="s2">) </span><span class="si">{3}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">field_code</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_code</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_rank_display</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomic_name</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxonomic_name</span><span class="p">)</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># URLs</span>
<div class="viewcode-block" id="Taxon.get_absolute_url"><a class="viewcode-back" href="../../developers.html#taxonomy.models.Taxon.get_absolute_url">[docs]</a>    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Detail url.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;taxonomy:taxon-detail&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_id</span><span class="p">})</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">update_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Admin update url.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;admin:taxonomy_taxon_change&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pk&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Derived properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">build_canonical_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Build the canonical name.</span>

<span class="sd">        * Anything above species: [NameID] NAME</span>
<span class="sd">        * Species: [NameID] RANK GENUS NAME</span>
<span class="sd">        * Subspecies and lower: [NameID] RANK GENUS SPECIES RANK NAME</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">RANK_SPECIES</span><span class="p">:</span>
            <span class="n">genus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ancestors</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span><span class="n">Taxon</span><span class="o">.</span><span class="n">RANK_GENUS</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;GENUS&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">genus</span> <span class="k">else</span> <span class="n">genus</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">rank</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">RANK_SPECIES</span><span class="p">:</span>
            <span class="n">genus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ancestors</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span><span class="n">Taxon</span><span class="o">.</span><span class="n">RANK_GENUS</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="n">species</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ancestors</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span><span class="n">Taxon</span><span class="o">.</span><span class="n">RANK_SPECIES</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> </span><span class="si">{1}</span><span class="s2"> </span><span class="si">{2}</span><span class="s2"> </span><span class="si">{3}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;GENUS&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">genus</span> <span class="k">else</span> <span class="n">genus</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;SPECIES&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">species</span> <span class="k">else</span> <span class="n">species</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_rank_display</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">build_taxonomic_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Build the taxonomic name.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2"> (</span><span class="si">{1}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_canonical_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_canonical_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">build_vernacular_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the preferred english, or the first available vernacular name.&quot;&quot;&quot;</span>
        <span class="n">vv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vernacular_set</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">vv</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">Vernacular</span><span class="o">.</span><span class="n">LANGUAGE_ENGLISH</span><span class="p">,</span> <span class="n">preferred</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">vv</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">Vernacular</span><span class="o">.</span><span class="n">LANGUAGE_ENGLISH</span><span class="p">,</span> <span class="n">preferred</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">name</span>
        <span class="k">elif</span> <span class="n">vv</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">Vernacular</span><span class="o">.</span><span class="n">LANGUAGE_ENGLISH</span><span class="p">):</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">vv</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">Vernacular</span><span class="o">.</span><span class="n">LANGUAGE_ENGLISH</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">name</span>
        <span class="k">elif</span> <span class="n">vv</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">vv</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">build_vernacular_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a comma-separated list of all vernacular names.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">vernacular_set</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="p">])</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gazettals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dict of Gazettal labels and admin URLs.</span>

<span class="sd">        TODO save as list field on model, populate in pre_save.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">label_cache</span><span class="p">,</span>
                 <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">absolute_admin_url</span><span class="p">,</span>
                 <span class="s1">&#39;is_active&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">is_active</span><span class="p">}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxon_gazettal</span><span class="o">.</span><span class="n">all</span><span class="p">()]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">active_gazettals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dict of active Gazettal labels and admin URLs.</span>

<span class="sd">        TODO save as list field on model, populate in pre_save.</span>
<span class="sd">        TODO make active_gazettals a manager method on Gazettal</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">conservation.models</span> <span class="k">import</span> <span class="n">Gazettal</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">label_cache</span><span class="p">,</span>
                 <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">absolute_admin_url</span><span class="p">,</span>
                 <span class="s1">&#39;is_active&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">is_active</span><span class="p">}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxon_gazettal</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
                <span class="n">status</span><span class="o">=</span><span class="n">Gazettal</span><span class="o">.</span><span class="n">STATUS_EFFECTIVE</span><span class="p">)]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">documents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dict of Documents and admin urls.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;obj&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span>
                 <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">absolute_admin_url</span><span class="p">}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">document_set</span><span class="o">.</span><span class="n">all</span><span class="p">()]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_listed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Whether this Taxon has a conservation listing.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">taxon_gazettals</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span></div>


<div class="viewcode-block" id="taxon_pre_save"><a class="viewcode-back" href="../../developers.html#taxonomy.models.taxon_pre_save">[docs]</a><span class="nd">@receiver</span><span class="p">(</span><span class="n">pre_save</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">Taxon</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">taxon_pre_save</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Taxon: Build names (expensive lookups).&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">canonical_name</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">build_canonical_name</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">taxonomic_name</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">build_taxonomic_name</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[taxon_pre_save] skipping can/tax name.&quot;</span><span class="p">)</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">vernacular_name</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">build_vernacular_name</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">vernacular_names</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">build_vernacular_names</span></div>


<div class="viewcode-block" id="Vernacular"><a class="viewcode-back" href="../../developers.html#taxonomy.models.Vernacular">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">Vernacular</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Vernacular Name.&quot;&quot;&quot;</span>

    <span class="n">LANGUAGE_ENGLISH</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">LANGUAGE_INDIGENOUS</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">LANGUAGES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">LANGUAGE_ENGLISH</span><span class="p">,</span> <span class="s2">&quot;English&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">LANGUAGE_INDIGENOUS</span><span class="p">,</span> <span class="s2">&quot;Indigenous&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">ogc_fid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;GeoServer OGC FeatureID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The OCG Feature ID of the record, used to &quot;</span>
                    <span class="s2">&quot;identify the record.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">taxon</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Taxon</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Taxon&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The taxon this vernacular name applies to.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Vernacular Name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The vernacular name.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">language</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveSmallIntegerField</span><span class="p">(</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">LANGUAGES</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Language&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The language of the vernacular name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">preferred</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is preferred&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Whether the vernacular name is the &quot;</span>
                    <span class="s2">&quot;preferred name in the given language.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Vernacular Name&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Vernacular Names&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The vernacular name: [NameID] (RANK) TAXONOMIC NAME.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2">] </span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">taxon</span><span class="o">.</span><span class="n">name_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="Crossreference"><a class="viewcode-back" href="../../developers.html#taxonomy.models.Crossreference">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">Crossreference</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Taxonomic crossreference.&quot;&quot;&quot;</span>

    <span class="n">REASON_MIS</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">REASON_TSY</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">REASON_NSY</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">REASON_EXC</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">REASON_CON</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">REASON_FOR</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">REASON_OGV</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">REASON_ERR</span> <span class="o">=</span> <span class="mi">7</span>
    <span class="n">REASON_ISY</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">REASONS</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">REASON_MIS</span><span class="p">,</span> <span class="s2">&quot;Misapplied name&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">REASON_TSY</span><span class="p">,</span> <span class="s2">&quot;Taxonomic synonym&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">REASON_NSY</span><span class="p">,</span> <span class="s2">&quot;Nomenclatural synonym&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">REASON_EXC</span><span class="p">,</span> <span class="s2">&quot;Excluded name&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">REASON_CON</span><span class="p">,</span> <span class="s2">&quot;Concept change&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">REASON_FOR</span><span class="p">,</span> <span class="s2">&quot;Formal description&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">REASON_OGV</span><span class="p">,</span> <span class="s2">&quot;Orthographic variant&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">REASON_ERR</span><span class="p">,</span> <span class="s2">&quot;Name in error&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">REASON_ISY</span><span class="p">,</span> <span class="s2">&quot;Informal Synonym&quot;</span><span class="p">),</span>
        <span class="c1"># ISY: non-current name pointing to another non-current name</span>
    <span class="p">)</span>

    <span class="n">xref_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BigIntegerField</span><span class="p">(</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus xref ID&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The WACensus xref ID of the record.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">predecessor</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Taxon</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Predecessor Taxon&quot;</span><span class="p">),</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;precedes&quot;</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The old taxon.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">successor</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Taxon</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Successor Taxon&quot;</span><span class="p">),</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;supercedes&quot;</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The new taxon.&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">reason</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveSmallIntegerField</span><span class="p">(</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">REASONS</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">REASON_ERR</span><span class="p">,</span>
        <span class="n">db_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Reason&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The reason for the taxonomic change.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">authorised_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus authorised by&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The person or system who authorised this record &quot;</span>
                    <span class="s2">&quot;last in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">authorised_on</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus authorised on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Date on which this record was authorised in WACensus.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">effective_to</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;WACensus deactivated on&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Xref considered deleted after this date if set.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">comments</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Comments are words to clarify things.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Crossreference&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Crossreferences&quot;</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;[</span><span class="si">{0}</span><span class="s2"> &gt; </span><span class="si">{1}</span><span class="s2">] </span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="s2">&quot;x&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">predecessor</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">predecessor</span><span class="o">.</span><span class="n">name_id</span><span class="p">,</span>
            <span class="s2">&quot;x&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">successor</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">successor</span><span class="o">.</span><span class="n">name_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_reason_display</span><span class="p">())</span></div>


<div class="viewcode-block" id="Community"><a class="viewcode-back" href="../../developers.html#taxonomy.models.Community">[docs]</a><span class="nd">@python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">Community</span><span class="p">(</span><span class="n">UrlsMixin</span><span class="p">,</span> <span class="n">LegacySourceMixin</span><span class="p">,</span> <span class="n">geo_models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ecological Community.&quot;&quot;&quot;</span>

    <span class="n">code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Community code&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;A short community codename.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Community name&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;A full community name.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Community description&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;An optional description.&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">eoo</span> <span class="o">=</span> <span class="n">geo_models</span><span class="o">.</span><span class="n">PolygonField</span><span class="p">(</span>
        <span class="n">srid</span><span class="o">=</span><span class="mi">4326</span><span class="p">,</span>
        <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">verbose_name</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;Extent of Occurrence&quot;</span><span class="p">),</span>
        <span class="n">help_text</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;The extent of occurrence as polygon in WGS84, if available.&quot;</span><span class="p">))</span>

    <span class="c1"># add cache fields here</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Class options.&quot;&quot;&quot;</span>

        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Community&quot;</span>
        <span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;Communities&quot;</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="p">]</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The name.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># URLs</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">update_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Admin update url.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;admin:taxonomy_community_change&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pk&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">})</span>

    <span class="c1"># -------------------------------------------------------------------------</span>
    <span class="c1"># Derived properties</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gazettals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dict of Gazettal labels and admin URLs.</span>

<span class="sd">        TODO save as list field on model, populate in pre_save.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">label_cache</span><span class="p">,</span>
                 <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">absolute_admin_url</span><span class="p">,</span>
                 <span class="s1">&#39;is_active&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">is_active</span><span class="p">}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">community_gazettal</span><span class="o">.</span><span class="n">all</span><span class="p">()]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">active_gazettals</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dict of active Gazettal labels and admin URLs.</span>

<span class="sd">        TODO save as list field on model, populate in pre_save.</span>
<span class="sd">        TODO make active_gazettals a manager method on Gazettal</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">conservation.models</span> <span class="k">import</span> <span class="n">Gazettal</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">label_cache</span><span class="p">,</span>
                 <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">absolute_admin_url</span><span class="p">,</span>
                 <span class="s1">&#39;is_active&#39;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">is_active</span><span class="p">}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">community_gazettal</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">status</span><span class="o">=</span><span class="n">Gazettal</span><span class="o">.</span><span class="n">STATUS_EFFECTIVE</span><span class="p">)]</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Florian Mayer

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>