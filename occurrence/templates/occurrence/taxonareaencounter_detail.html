{% extends "base.html" %}
{% load staticfiles compress leaflet_tags geojson_tags mptt_tags taxonomy_tags occurrence_tags observations crispy_forms_tags bootstrap4 %}
{% load render_table from django_tables2 %}

{% block extrastyle %}
{% compress css %}
<style>
.leaflet-popup, .leaflet-popup-content-wrapper, .leaflet-popup-content {
  width: 350px; /* narrower popup */
  padding: -10px;  /* fix close button position */
}
</style>
{% endcompress %}
{% endblock %}

{% block content %}

<div class="container-fluid" id="wrap">

<!-- Breadcrumbs -->
  <div class="row" id="occ-detail-breadcrumb">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item" aria-current="page">
          <a href="{% url 'taxon-list' %}">Species</a>
        </li>
        <li class="breadcrumb-item" aria-current="page">
          <a href="{% url 'taxon-list' %}?name_id={{ original.taxon.name_id }}"
          title="List {{ original.taxon.taxonomic_name }} with its parents and immediate children.">
            Taxonomy of {{ original.taxon }}</a>
        </li>
        <li class="breadcrumb-item" aria-current="page">
          <a href="{% url 'taxon-detail' original.taxon.name_id %}">{{ original.taxon }}</a>
        </li>
        <li class="breadcrumb-item" aria-current="page">
          <a href="#">{{ original }}</a>
        </li>
      </ol>
    </nav>
  </div><!-- /#taxon-detail-breadcrumb -->

  <div class="container-fluid">

    <div class="row">
    <!-- Taxon details -->
    <div class="col-12 col-sm-12 col-md-6 col-lg-8" id="taxon-detail-main">
    <div class="jumbotron">


<div class="d-flex flex-row">
  <div class="mr-auto">
    <h5>[{{ original.code }}] {{ original.name }}</h5>
  </div>
  <div>
     <a href="{{ original.absolute_admin_url }}"
        class="btn btn-{{ original.status|tb_status_icon }} btn-sm"
        target="_" title="Edit record in new tab">
        <i class="oi oi-pencil"></i>
        {{ original.get_status_display }}
    </a>
  </div>
</div>

<div class="row">
  <div class="col col-12">
    <h6>{{ original.taxon }}</h6>
  </div>
</div>

<div class="row">
  <div class="col col-12">
    <h6>{{ original.get_area_type_display }}</h6>
  </div>
</div>

<div class="row">
  <div class="col col-12">
  <i class="oi oi-calendar" aria-hidden="true"></i>&nbsp;
  {{ original.encountered_on|date:"r" }}
</div>
</div>

<div class="row">
  <div class="col col-12">
  <i class="oi oi-globe" aria-hidden="true"></i>&nbsp;
  [{{ original.code }}] {{ original.name }}
</div>
</div>

<div class="row">
  <div class="col col-12">
  <i class="oi oi-person" aria-hidden="true"></i>&nbsp;
  <a href="mailto:{{ original.encountered_by.email }}"
     target="_"
     title="Send email to {{ original.encountered_by.fullname }}"
     subject="Question about TSC Encounter {{ original }}">
    {{ original.encountered_by.name }}
  </a>
</div>
</div><!-- /.row -->

<div class="row">
  <div class="col col-12">
  {{ original.description|safe }}
</div>
</div><!-- /.row -->

 </div><!-- /.jumbotron -->
    </div><!-- /.col#taxon-detail-main -->

    <div class="col-12 col-md-6 col-lg-4" id="occ-map">
        <div id="map">
          {% leaflet_map "detailmap" callback="window.map_init" %}
        </div>
    </div><!-- /.col#taxon-occ -->


{% endblock content %}