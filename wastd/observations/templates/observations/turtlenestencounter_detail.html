{% extends "pages/base.html" %}
{% load leaflet_tags geojson_tags taxonomy_tags static %}
{% load render_table from django_tables2 %}

{% block extrastyle %}
<style>
.leaflet-popup, .leaflet-popup-content-wrapper, .leaflet-popup-content {
  width: 350px; /* narrower popup */
  padding: -10px;  /* fix close button position */
}
.leaflet-tooltip { width: 200px; word-wrap: break-word; }
</style>
{% endblock %}

{% block content %}
{% include 'shared/breadcrumbs.html' %}
<div class="row" id="row-occ-detail">
  <!-- Subject details -->
  <div class="col-12 col-sm-12 col-md-6 col-lg-8" id="occ-detail-main">
    <div class="card card-lg detailarea m-0">
      <div class="card-header">
        <small class="float-right">
          {% include "shared/admin_qa.html" with label=False %}
        </small>
        <h3>{{ object.get_taxon_display }} - {{ object.get_species_display }}</h3>
      </div>

      <div class="card-body">

        <div class="row">
          <div class="col col-12">
            <i class="oi oi-calendar" aria-hidden="true"></i>&nbsp;
            {{ object.when|date:"r" }}
          </div>
        </div>

        <div class="row">
          <div class="col col-12">
            <i class="oi oi-comment-square" aria-hidden="true"></i>&nbsp;
            {{ object.get_encounter_type_display }}
          </div>
        </div>

        <div class="row">
          <div class="col col-12">
            <i class="oi oi-person" aria-hidden="true"></i>&nbsp;
              {{ object.observer }}
          </div>
        </div><!-- /.row -->

        <div class="row">
          <div class="col col-12">
              <strong>Nest age:</strong> {{ object.get_nest_age_display }}<br>
              <strong>Species:</strong> {{ object.get_species_display }}<br>
              <strong>Nest type:</strong> {{ object.get_nest_type_display }}<br>
              {% for obs in object.observation_set.all %}
              <div class="row"><div class="col col-12">{{ obs.as_html|safe }}</div></div>
              {% endfor %}
          </div>
        </div><!-- /.row -->


      </div><!-- /.card-body -->

    </div><!-- /.card -->
  </div><!-- /.col#occ-detail-main -->

  <div class="col-12 col-md-6 col-lg-4" id="occ-detail-map">
      <div>
        {% leaflet_map "detailmap" callback="window.map_init" %}
      </div>
  </div><!-- /.col#occ-map -->
</div><!-- .row#row-occ-detail -->

{% endblock %}
