{% load staticfiles %}
<div class="card" style="width: 16rem; margin: 0.2rem;">
  <img class="card-img-top"
    src="{% static 'images/map_example.png' %}" alt="Occurrence map">
  <div class="card-body">

    <h6 class="card-subtitle mb-2 text-muted">

    <!-- Rank -->
    <span class="badge badge-primary">
      {{ original.get_rank_display }}
    </span>

    <!-- Name ID -->
    <span class="badge badge-primary">{{original.name_id}}</span>

    <!-- Taxonomic status -->
    {% if original.current == True %}
    <span class="badge badge-success">
      <span class="oi oi-thumb-up" title="Name is current" aria-hidden="true"></span>
    </span>
    {% else %}
    <span class="badge badge-secondary">
      <span class="oi oi-thumb-down" title="Name is non current" aria-hidden="true"></span>
    </span>
    {% endif %}

    <!-- Publication status -->
    {% if original.publication_status < 2 %}
    <span class="badge badge-secondary">
      {{ original.get_publication_status_display }}
    </span>
    {% endif %}

    <!-- Leaf nodes are terminal taxa -->
    {% if original.is_leaf_node %}
    <span class="badge badge-success">
      <span class="oi oi-media-stop" title="Terminal Taxon" aria-hidden="true"></span>
    </span>
    {% endif %}
    </h6>

    <h5 class="card-title {% if original.current == False %}text-muted{% endif %}">
      {{ original.canonical_name }}
    </h5>

    <!-- Author -->
    {% if original.author %}
    <h6 class="card-subtitle mb-2 text-muted">
      <span class="oi oi-person" title="Author" aria-hidden="true"></span>
      {{ original.author }}
    </h6>
    {% endif %}

    <!-- Vernacular -->
    {% if original.vernacular_name %}
    <h6 class="card-subtitle mb-2 text-muted">
      <span class="oi oi-double-quote-sans-left" title="Preferred English vernacular name" aria-hidden="true"></span>
      {{ original.vernacular_name }}
    </h6>
    {% endif %}

    {% if original.vernacular_names and original.vernacular_names != original.vernacular_name %}
    <h6 class="card-subtitle mb-2 text-muted">
      <span class="oi oi-tags" title="All vernacular names" aria-hidden="true"></span>
      {{ original.vernacular_names }}
    </h6>
    {% endif %}

    {% for gazettal in original.gazettals %}
    <h6 class="card-subtitle mb-2">
      <span class="badge badge-danger">
      <span class="oi oi-warning" title="Listed as {{ gazettal.label }}" aria-hidden="true"></span>
        {{ gazettal.label }}
        {% if request.user.is_staff %}
        <a href="{{ gazettal.url }}"
          title="Because you have DBCA Curator privileges, you may edit this conservation listing." target="_">
          <span class="oi oi-pencil" aria-hidden="true"></span>
        </a>
      {% endif %}
      </span>

    </h6>
    {% endfor %}

  </div>

  <ul class="list-group list-group-flush">

    {% if request.user.is_staff %}
    <li class="list-group-item">
      <a href="{% url 'admin:conservation_taxongazettal_add' %}?taxon={{ original.pk }}"
         title="Because you have DBCA Curator privileges, you may propose a new conservation listing." target="_">
        <span class="oi oi-plus" aria-hidden="true"></span>
        Propose new cons listing
      </a>
    </li>
    {% endif %}


    {% for document in original.document_set.all %}
    <li class="list-group-item">
      {% for attachment in document.attachments.all %}
      <a href="{{ attachment.attachment.url }}" target="_" title="{{ attachment.title }}">
      <span class="badge badge-{% if attachment.confidential == True%}danger{% else %}success{% endif %}">
        <span class="oi oi-document" aria-hidden="true"></span>
      </span>
      </a>
      {% endfor %}
      {{ document }}
      {% if request.user.is_staff %}
        <a href="{{ document.absolute_admin_url }}"
          title="Because you have DBCA Curator privileges, you may edit this Document." target="_">
          <span class="oi oi-pencil" aria-hidden="true"></span>
        </a>
      {% endif %}
    </li>
    {% endfor %}

  </ul>

  <div class="card-footer">

    <a href="?name_id={{ original.name_id }}"
      class="btn btn-primary btn-sm btn-block"
      title="Restrict results to {{ original.taxonomic_name }} with its parents and immediate children and reset all filters.">
      <span class="oi oi-project" aria-hidden="true"></span>
      Explore {{ original.canonical_name }}
    </a>

    <!-- Admin link: Taxon change -->
<!--     <a href="{% url 'admin:taxonomy_taxon_change' original.pk %}"
      class="btn btn-primary btn-sm btn-block" target="_" rel="nofollow">
      <span class="oi oi-eye" title="View and update details" aria-hidden="true"></span>
      View details
    </a>
 -->
  </div>
</div>