{% extends "base_wastd.html" %}
{% load static bootstrap_pagination crispy_forms_tags %}

{% block breadcrumbs %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
        <li class="breadcrumb-item active">Turtle observations</li>
    </ol>
</nav>
{% endblock %}

{% block page_content_inner %}
<!-- Search bar -->
<div class="row">
    <div class="col">
        <form action="" method="get">
            <input id="search_field" type="text" class="form-control" name="q" placeholder="Search observations (ID, turtle ID, tag serial, etc.)" value="{{ query_string }}">
        </form>
    </div>
</div>

{% block pagination_row %}
<div class="row mt-1" id="pagination-row">
    <div class="col">
    {% if object_list %}
        {% if object_count %}<div>Found {{ object_count }} records</div>{% endif %}
        {% if page_obj.has_other_pages %}<div>{% bootstrap_paginate page_obj range=10 show_prev_next="true" show_first_last="true" %}</div>{% endif %}
    {% endif %}
    </div>
</div>
{% endblock pagination_row %}

{% if object_list %}
<div class="row">
  <div class="col">
    <table class="table table-striped table-bordered table-sm table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>Observation time</th>
                <th>Turtle</th>
                <th>Alive</th>
                <th>Place</th>
                <th>Activity</th>
                <th>Tagger</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for obj in object_list %}
            <tr>
                <td>{{ obj.pk }}</td>
                <td><a href="{{ obj.get_absolute_url }}">{{ obj.observation_datetime|date:"D, j M Y H:i" }}</a></td>
                <td><a href="{{ obj.turtle.get_absolute_url }}">{{ obj.turtle }}</a></td>
                <td>{{ obj.alive|yesno:"Yes,No,Unknown" }}</td>
                <td>{{ obj.place|default_if_none:"" }}</td>
                <td>{{ obj.activity|default_if_none:"" }}</td>
                <td>{{ obj.tagger_person.name|default_if_none:"" }}</td>
                <td>{% if obj.point %}<i class="fa-solid fa-location-pin"></i>{% endif %}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
  </div>
</div>
{% endif %}

{% if object_list %}
{% if page_obj.has_other_pages %}<div>{% bootstrap_paginate page_obj range=10 show_prev_next="true" show_first_last="true" %}</div>{% endif %}
{% endif %}

{% endblock page_content_inner %}

{% block extra_js %}{% endblock %}
